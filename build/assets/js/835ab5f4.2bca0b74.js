"use strict";(self.webpackChunkDocuQuest_oslar_code=self.webpackChunkDocuQuest_oslar_code||[]).push([[2339],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>i});var a=s(6540);const o={},c=a.createContext(o);function r(e){const n=a.useContext(c);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),a.createElement(c.Provider,{value:n},e.children)}},9757:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"js/api/casosAvanzados","title":"Casos de uso avanzados","description":"\ud83d\udd10 1. Autenticaci\xf3n con OAuth","source":"@site/docs/js/api/casosAvanzados.md","sourceDirName":"js/api","slug":"/js/api/casosAvanzados","permalink":"/docuQuest/docs/js/api/casosAvanzados","draft":false,"unlisted":false,"editUrl":"https://github.com/OslarCode/OslarCode/docs/js/api/casosAvanzados.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Autenticaci\xf3n y Autorizaci\xf3n","permalink":"/docuQuest/docs/js/api/autenticacionAutorizacion"},"next":{"title":"Fundamentos de la programaci\xf3n orientada a objetos (Poo)","permalink":"/docuQuest/docs/poo/fundamentosPOO"}}');var o=s(4848),c=s(8453);const r={},i="Casos de uso avanzados",t={},d=[{value:"\ud83d\udd10 1. Autenticaci\xf3n con OAuth",id:"-1-autenticaci\xf3n-con-oauth",level:2},{value:"\u2705 C\xf3digo actualizado y comentado:",id:"-c\xf3digo-actualizado-y-comentado",level:3},{value:"\ud83d\udcc1 2. Manipulaci\xf3n de archivos (upload y download)",id:"-2-manipulaci\xf3n-de-archivos-upload-y-download",level:2},{value:"\ud83d\udfe2 Carga de archivo usando <code>FormData</code>:",id:"-carga-de-archivo-usando-formdata",level:3},{value:"\ud83d\udfe2 Descarga de archivo con blob:",id:"-descarga-de-archivo-con-blob",level:3},{value:"\ud83d\udd04 3. Comunicaci\xf3n en tiempo real con WebSockets",id:"-3-comunicaci\xf3n-en-tiempo-real-con-websockets",level:2},{value:"\u2705 C\xf3digo comentado de WebSocket:",id:"-c\xf3digo-comentado-de-websocket",level:3},{value:"\ud83d\udcca 4. Uso de GraphQL en APIs JavaScript",id:"-4-uso-de-graphql-en-apis-javascript",level:2},{value:"\u2705 Consulta GraphQL:",id:"-consulta-graphql",level:3},{value:"\ud83e\uddea 5. Testing con Postman",id:"-5-testing-con-postman",level:2},{value:"\ud83d\ude80 6. Cach\xe9 de respuestas en clientes y servidores",id:"-6-cach\xe9-de-respuestas-en-clientes-y-servidores",level:2},{value:"\ud83d\udfe2 Ejemplo simple: cach\xe9 en localStorage del navegador",id:"-ejemplo-simple-cach\xe9-en-localstorage-del-navegador",level:3},{value:"\ud83c\udf10 7. Dise\xf1o REST avanzado",id:"-7-dise\xf1o-rest-avanzado",level:2},{value:"\ud83d\udfe2 Ejemplo de URL bien dise\xf1ada:",id:"-ejemplo-de-url-bien-dise\xf1ada",level:3},{value:"\ud83d\udccc 8. Buenas pr\xe1cticas adicionales",id:"-8-buenas-pr\xe1cticas-adicionales",level:2},{value:"\ud83e\udde0 Conclusi\xf3n general",id:"-conclusi\xf3n-general",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"casos-de-uso-avanzados",children:"Casos de uso avanzados"})}),"\n",(0,o.jsx)(n.h2,{id:"-1-autenticaci\xf3n-con-oauth",children:"\ud83d\udd10 1. Autenticaci\xf3n con OAuth"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"OAuth"})," es un protocolo de autorizaci\xf3n que permite a las apps obtener acceso limitado a recursos sin necesidad de contrase\xf1as. Ideal para integraci\xf3n con servicios como Google, GitHub, etc."]}),"\n",(0,o.jsx)(n.h3,{id:"-c\xf3digo-actualizado-y-comentado",children:"\u2705 C\xf3digo actualizado y comentado:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"const OAuth = require('oauth-1.0a');\nconst crypto = require('crypto');\nconst fetch = require('node-fetch');\n\n// Configuramos OAuth 1.0a con clave del consumidor y secreto\nconst oauth = OAuth({\n  consumer: {\n    key: 'TU_CONSUMER_KEY',\n    secret: 'TU_CONSUMER_SECRET'\n  },\n  signature_method: 'HMAC-SHA1',\n  hash_function(baseString, key) {\n    return crypto.createHmac('sha1', key).update(baseString).digest('base64');\n  }\n});\n\n// Preparamos datos para solicitud autenticada\nconst requestData = {\n  url: 'https://api.twitter.com/1.1/statuses/home_timeline.json',\n  method: 'GET'\n};\n\nconst token = {\n  key: 'TU_ACCESS_TOKEN',\n  secret: 'TU_ACCESS_SECRET'\n};\n\n// Enviamos solicitud autenticada\nfetch(requestData.url, {\n  method: requestData.method,\n  headers: oauth.toHeader(oauth.authorize(requestData, token))\n})\n.then(res => res.json())\n.then(data => console.log('\u2705 Datos recibidos:', data))\n.catch(err => console.error('\u274c Error OAuth:', err));\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-2-manipulaci\xf3n-de-archivos-upload-y-download",children:"\ud83d\udcc1 2. Manipulaci\xf3n de archivos (upload y download)"}),"\n",(0,o.jsxs)(n.h3,{id:"-carga-de-archivo-usando-formdata",children:["\ud83d\udfe2 Carga de archivo usando ",(0,o.jsx)(n.code,{children:"FormData"}),":"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-html",children:'<input type="file" id="archivo">\n\n'})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"document.getElementById('archivo').addEventListener('change', async (e) => {\n  const file = e.target.files[0];\n  const formData = new FormData();\n  formData.append('file', file);\n\n  try {\n    const res = await fetch('https://api.miapp.com/upload', {\n      method: 'POST',\n      body: formData\n    });\n\n    const result = await res.json();\n    console.log('\u2705 Archivo cargado:', result);\n  } catch (err) {\n    console.error('\u274c Error al subir archivo:', err);\n  }\n});\n\n"})}),"\n",(0,o.jsx)(n.h3,{id:"-descarga-de-archivo-con-blob",children:"\ud83d\udfe2 Descarga de archivo con blob:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"async function descargarArchivo() {\n  const url = 'https://api.miapp.com/files/123';\n  const res = await fetch(url);\n\n  if (!res.ok) throw new Error('\u274c No se pudo descargar el archivo');\n\n  const blob = await res.blob();\n  const enlace = document.createElement('a');\n  enlace.href = URL.createObjectURL(blob);\n  enlace.download = 'reporte.pdf';\n  enlace.click();\n  URL.revokeObjectURL(enlace.href);\n}\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-3-comunicaci\xf3n-en-tiempo-real-con-websockets",children:"\ud83d\udd04 3. Comunicaci\xf3n en tiempo real con WebSockets"}),"\n",(0,o.jsx)(n.h3,{id:"-c\xf3digo-comentado-de-websocket",children:"\u2705 C\xf3digo comentado de WebSocket:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"const socket = new WebSocket('wss://api.miapp.com/socket');\n\n// Se establece conexi\xf3n\nsocket.addEventListener('open', () => {\n  console.log('\u2705 Conectado al WebSocket');\n  socket.send(JSON.stringify({ tipo: 'subscribe', canal: 'notificaciones' }));\n});\n\n// Recibe mensajes en tiempo real\nsocket.addEventListener('message', (event) => {\n  const data = JSON.parse(event.data);\n  console.log('\ud83d\udce9 Mensaje recibido:', data);\n});\n\n// Error en la conexi\xf3n\nsocket.addEventListener('error', (e) => {\n  console.error('\u274c Error WebSocket:', e);\n});\n\n// Cierre de conexi\xf3n\nsocket.addEventListener('close', () => {\n  console.log('\ud83d\udd0c Conexi\xf3n cerrada');\n});\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-4-uso-de-graphql-en-apis-javascript",children:"\ud83d\udcca 4. Uso de GraphQL en APIs JavaScript"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"GraphQL"})," permite consultar solo los datos necesarios, mejorando la eficiencia frente a REST."]}),"\n",(0,o.jsx)(n.h3,{id:"-consulta-graphql",children:"\u2705 Consulta GraphQL:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"const query = `\n  query {\n    usuarios {\n      id\n      nombre\n      email\n    }\n  }\n`;\n\nfetch('https://api.miapp.com/graphql', {\n  method: 'POST',\n  headers: {\n    'Content-Type': 'application/json'\n  },\n  body: JSON.stringify({ query })\n})\n.then(res => res.json())\n.then(data => console.log('\u2705 Datos GraphQL:', data))\n.catch(err => console.error('\u274c Error GraphQL:', err));\n\n"})}),"\n",(0,o.jsx)(n.h2,{id:"-5-testing-con-postman",children:"\ud83e\uddea 5. Testing con Postman"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Postman"})," es ideal para probar endpoints y automatizar pruebas."]}),"\n",(0,o.jsx)(n.p,{children:"Aqu\xed tienes un ejemplo JSON real de colecci\xf3n:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-json",children:'{\n  "info": {\n    "name": "Libros API Test",\n    "_postman_id": "abcd-1234",\n    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"\n  },\n  "item": [\n    {\n      "name": "Obtener todos los libros",\n      "request": {\n        "method": "GET",\n        "url": "https://api.miapp.com/libros"\n      }\n    }\n  ]\n}\n\n'})}),"\n",(0,o.jsx)(n.p,{children:"\ud83e\udde0 Consejo: Puedes importar este archivo en Postman y ejecutar la prueba f\xe1cilmente."}),"\n",(0,o.jsx)(n.h2,{id:"-6-cach\xe9-de-respuestas-en-clientes-y-servidores",children:"\ud83d\ude80 6. Cach\xe9 de respuestas en clientes y servidores"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"El cach\xe9"})," permite evitar solicitudes repetidas y ahorrar recursos. Puede aplicarse en:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\ud83e\udde0 ",(0,o.jsx)(n.strong,{children:"Frontend"}),": usando ",(0,o.jsx)(n.code,{children:"localStorage"}),", ",(0,o.jsx)(n.code,{children:"sessionStorage"}),", IndexedDB, etc."]}),"\n",(0,o.jsxs)(n.li,{children:["\ud83d\udca1 ",(0,o.jsx)(n.strong,{children:"Backend"}),": con Redis, Varnish, HTTP headers (",(0,o.jsx)(n.code,{children:"Cache-Control"}),", ",(0,o.jsx)(n.code,{children:"ETag"}),", etc.)"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"-ejemplo-simple-cach\xe9-en-localstorage-del-navegador",children:"\ud83d\udfe2 Ejemplo simple: cach\xe9 en localStorage del navegador"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"async function obtenerDatosConCache() {\n  const cacheKey = 'libros_cache';\n\n  // Si hay datos en cache, los usamos\n  if (localStorage.getItem(cacheKey)) {\n    console.log('\u2705 Usando datos de cach\xe9');\n    return JSON.parse(localStorage.getItem(cacheKey));\n  }\n\n  // Si no, hacemos la solicitud y guardamos el resultado\n  const res = await fetch('https://api.miapp.com/libros');\n  const datos = await res.json();\n  localStorage.setItem(cacheKey, JSON.stringify(datos));\n  return datos;\n}\n\n"})}),"\n",(0,o.jsxs)(n.p,{children:["\ud83e\udde0 ",(0,o.jsx)(n.strong,{children:"Consejo"}),": Puedes agregar una caducidad usando ",(0,o.jsx)(n.code,{children:"Date.now()"})," y comparar con un tiempo l\xedmite."]}),"\n",(0,o.jsx)(n.h2,{id:"-7-dise\xf1o-rest-avanzado",children:"\ud83c\udf10 7. Dise\xf1o REST avanzado"}),"\n",(0,o.jsx)(n.p,{children:"Un buen dise\xf1o de API REST no solo se basa en rutas y verbos, tambi\xe9n considera:"}),"\n",(0,o.jsxs)(n.table,{children:[(0,o.jsx)(n.thead,{children:(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.th,{children:"Elemento"}),(0,o.jsx)(n.th,{children:"Ejemplo"})]})}),(0,o.jsxs)(n.tbody,{children:[(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Nombres claros y plurales"}),(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"/usuarios"}),", ",(0,o.jsx)(n.code,{children:"/productos/123"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Verbos HTTP"}),(0,o.jsxs)(n.td,{children:[(0,o.jsx)(n.code,{children:"GET"}),", ",(0,o.jsx)(n.code,{children:"POST"}),", ",(0,o.jsx)(n.code,{children:"PUT"}),", ",(0,o.jsx)(n.code,{children:"PATCH"}),", ",(0,o.jsx)(n.code,{children:"DELETE"})]})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Rutas jer\xe1rquicas"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"/usuarios/1/compras/42"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Filtros y par\xe1metros"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:"/productos?categoria=libros&orden=precio"})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Respuestas estandarizadas"}),(0,o.jsx)(n.td,{children:(0,o.jsx)(n.code,{children:'{ "data": [...], "meta": {...} }'})})]}),(0,o.jsxs)(n.tr,{children:[(0,o.jsx)(n.td,{children:"Documentaci\xf3n"}),(0,o.jsx)(n.td,{children:"Swagger, Postman, Redoc, etc."})]})]})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h3,{id:"-ejemplo-de-url-bien-dise\xf1ada",children:"\ud83d\udfe2 Ejemplo de URL bien dise\xf1ada:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{children:"GET https://api.miapp.com/libros?categoria=ficcion&autor=asimov\n\n"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"GET"})," para consultar."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"libros"})," es plural y descriptivo."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"?categoria=ficcion"})," como filtro de b\xfasqueda."]}),"\n",(0,o.jsx)(n.li,{children:"Claridad, orden y consistencia."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"-8-buenas-pr\xe1cticas-adicionales",children:"\ud83d\udccc 8. Buenas pr\xe1cticas adicionales"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Usar HTTPS siempre"})," (protege tokens, cookies y datos)."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsxs)(n.strong,{children:["Token de autenticaci\xf3n en ",(0,o.jsx)(n.code,{children:"Authorization: Bearer"})]}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Evitar exponer errores t\xe9cnicos en producci\xf3n"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Gestionar permisos y roles desde el backend"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Validar y sanitizar todos los datos del usuario"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Evitar datos sensibles en el frontend o en la URL"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Limitar la tasa de solicitudes"})," (rate limiting)."]}),"\n",(0,o.jsxs)(n.li,{children:["\u2705 ",(0,o.jsx)(n.strong,{children:"Versionar tu API"}),": ",(0,o.jsx)(n.code,{children:"/v1/usuarios"})," \u2192 ",(0,o.jsx)(n.code,{children:"/v2/usuarios"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"-conclusi\xf3n-general",children:"\ud83e\udde0 Conclusi\xf3n general"}),"\n",(0,o.jsxs)(n.p,{children:["La gesti\xf3n avanzada de APIs REST en JavaScript va m\xe1s all\xe1 del ",(0,o.jsx)(n.code,{children:"fetch"})," b\xe1sico. Involucra seguridad, dise\xf1o limpio, escalabilidad, rendimiento y buenas pr\xe1cticas de desarrollo profesional."]})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}}}]);