"use strict";(globalThis.webpackChunkDocuQuest_oslar_code=globalThis.webpackChunkDocuQuest_oslar_code||[]).push([[7376],{1386:(r,o,e)=>{e.r(o),e.d(o,{assets:()=>t,contentTitle:()=>i,default:()=>m,frontMatter:()=>c,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"backend/Node.js/manejoDeProcesos","title":"Manejo de procesos del sistema en Node.js ES Modules","description":"Node.js proporciona acceso completo a los procesos del sistema operativo a trav\xe9s del m\xf3dulo process (global) y m\xf3dulos adicionales como os, childprocess, y workerthreads. Estos permiten interactuar con el entorno de ejecuci\xf3n, gestionar procesos hijos y aprovechar m\xfaltiples n\xfacleos de CPU.","source":"@site/docs/backend/Node.js/manejoDeProcesos.md","sourceDirName":"backend/Node.js","slug":"/backend/Node.js/manejoDeProcesos","permalink":"/docuQuest/docs/backend/Node.js/manejoDeProcesos","draft":false,"unlisted":false,"editUrl":"https://github.com/OslarCode/OslarCode/docs/backend/Node.js/manejoDeProcesos.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Manejo del sistema de archivos con Node.js ES Modules","permalink":"/docuQuest/docs/backend/Node.js/manejoDeArchivos"},"next":{"title":"Asincron\xeda en Node.js ES Modules","permalink":"/docuQuest/docs/backend/Node.js/asincronia"}}');var s=e(4848),a=e(8453);const c={},i="Manejo de procesos del sistema en Node.js ES Modules",t={},l=[{value:"M\xf3dulo Process - Informaci\xf3n del Proceso Actual",id:"m\xf3dulo-process---informaci\xf3n-del-proceso-actual",level:2},{value:"Informaci\xf3n B\xe1sica del Proceso",id:"informaci\xf3n-b\xe1sica-del-proceso",level:3},{value:"Variables de Entorno",id:"variables-de-entorno",level:3},{value:"Uso de Memoria y Rendimiento",id:"uso-de-memoria-y-rendimiento",level:3},{value:"M\xf3dulo OS - Informaci\xf3n del Sistema Operativo",id:"m\xf3dulo-os---informaci\xf3n-del-sistema-operativo",level:2},{value:"M\xf3dulo Child Process - Ejecuci\xf3n de Procesos Hijos",id:"m\xf3dulo-child-process---ejecuci\xf3n-de-procesos-hijos",level:2},{value:"Ejecuci\xf3n Sincr\xf3nica de Comandos",id:"ejecuci\xf3n-sincr\xf3nica-de-comandos",level:3},{value:"Ejecuci\xf3n Asincr\xf3nica de Comandos",id:"ejecuci\xf3n-asincr\xf3nica-de-comandos",level:3},{value:"Spawn para Comandos con Salida en Tiempo Real",id:"spawn-para-comandos-con-salida-en-tiempo-real",level:3},{value:"M\xf3dulo Worker Threads - Hilos de Trabajo",id:"m\xf3dulo-worker-threads---hilos-de-trabajo",level:2},{value:"Manejo de Se\xf1ales del Sistema",id:"manejo-de-se\xf1ales-del-sistema",level:2},{value:"Ejemplo Pr\xe1ctico: Monitor del Sistema",id:"ejemplo-pr\xe1ctico-monitor-del-sistema",level:2},{value:"Gesti\xf3n de Procesos en Producci\xf3n",id:"gesti\xf3n-de-procesos-en-producci\xf3n",level:2},{value:"Conclusi\xf3n",id:"conclusi\xf3n",level:2}];function d(r){const o={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...r.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.header,{children:(0,s.jsx)(o.h1,{id:"manejo-de-procesos-del-sistema-en-nodejs-es-modules",children:"Manejo de procesos del sistema en Node.js ES Modules"})}),"\n",(0,s.jsxs)(o.p,{children:["Node.js proporciona acceso completo a los procesos del sistema operativo a trav\xe9s del m\xf3dulo ",(0,s.jsx)(o.code,{children:"process"})," (global) y m\xf3dulos adicionales como ",(0,s.jsx)(o.code,{children:"os"}),", ",(0,s.jsx)(o.code,{children:"child_process"}),", y ",(0,s.jsx)(o.code,{children:"worker_threads"}),". Estos permiten interactuar con el entorno de ejecuci\xf3n, gestionar procesos hijos y aprovechar m\xfaltiples n\xfacleos de CPU."]}),"\n",(0,s.jsx)(o.h2,{id:"m\xf3dulo-process---informaci\xf3n-del-proceso-actual",children:"M\xf3dulo Process - Informaci\xf3n del Proceso Actual"}),"\n",(0,s.jsxs)(o.p,{children:["El objeto ",(0,s.jsx)(o.code,{children:"process"})," es global en Node.js y no requiere importaci\xf3n. Proporciona informaci\xf3n y control sobre el proceso actual de Node.js."]}),"\n",(0,s.jsx)(o.h3,{id:"informaci\xf3n-b\xe1sica-del-proceso",children:"Informaci\xf3n B\xe1sica del Proceso"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'function mostrarInfoProceso() {\r\n  console.log("=== INFORMACI\xd3N DEL PROCESO NODE.JS ===");\r\n\r\n  // Informaci\xf3n de identificaci\xf3n\r\n  console.log("ID del proceso:", process.pid);\r\n  console.log("ID del proceso padre:", process.ppid);\r\n  console.log("T\xedtulo del proceso:", process.title);\r\n\r\n  // Informaci\xf3n de ejecuci\xf3n\r\n  console.log("Versi\xf3n de Node.js:", process.version);\r\n  console.log("Versiones de dependencias:", process.versions);\r\n  console.log("Plataforma:", process.platform);\r\n  console.log("Arquitectura:", process.arch);\r\n\r\n  // Directorios\r\n  console.log("Directorio de trabajo actual:", process.cwd());\r\n  console.log("Directorio del ejecutable Node.js:", process.execPath);\r\n\r\n  // Argumentos de l\xednea de comandos\r\n  console.log("Argumentos recibidos:", process.argv);\r\n  console.log("Ruta del script ejecutado:", process.argv[1]);\r\n}\r\n\r\nmostrarInfoProceso();\n'})}),"\n",(0,s.jsx)(o.h3,{id:"variables-de-entorno",children:"Variables de Entorno"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'function manejarVariablesEntorno() {\r\n  console.log("=== VARIABLES DE ENTORNO ===");\r\n\r\n  // Acceder a variables de entorno espec\xedficas\r\n  console.log(\r\n    "Entorno de ejecuci\xf3n (NODE_ENV):",\r\n    process.env.NODE_ENV || "no definido"\r\n  );\r\n  console.log("Usuario del sistema:", process.env.USER || process.env.USERNAME);\r\n  console.log("Directorio home:", process.env.HOME || process.env.USERPROFILE);\r\n  console.log("Path del sistema:", process.env.PATH);\r\n\r\n  // Establecer variables de entorno (solo para este proceso)\r\n  process.env.MI_VARIABLE = "valor personalizado";\r\n  console.log("Variable personalizada:", process.env.MI_VARIABLE);\r\n\r\n  // Listar todas las variables de entorno\r\n  console.log(\r\n    "Total de variables de entorno:",\r\n    Object.keys(process.env).length\r\n  );\r\n}\r\n\r\nmanejarVariablesEntorno();\n'})}),"\n",(0,s.jsx)(o.h3,{id:"uso-de-memoria-y-rendimiento",children:"Uso de Memoria y Rendimiento"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'function monitorearMemoria() {\r\n  console.log("=== USO DE MEMORIA DEL PROCESO ===");\r\n\r\n  const usoMemoria = process.memoryUsage();\r\n\r\n  console.log(\r\n    "RSS (Resident Set Size):",\r\n    Math.round(usoMemoria.rss / 1024 / 1024) + " MB"\r\n  );\r\n  console.log(\r\n    "Heap Total:",\r\n    Math.round(usoMemoria.heapTotal / 1024 / 1024) + " MB"\r\n  );\r\n  console.log(\r\n    "Heap Usado:",\r\n    Math.round(usoMemoria.heapUsed / 1024 / 1024) + " MB"\r\n  );\r\n  console.log(\r\n    "External:",\r\n    Math.round(usoMemoria.external / 1024 / 1024) + " MB"\r\n  );\r\n\r\n  // Uso de CPU\r\n  const usoCPU = process.cpuUsage();\r\n  console.log("Uso de CPU (user):", usoCPU.user + " microseconds");\r\n  console.log("Uso de CPU (system):", usoCPU.system + " microseconds");\r\n}\r\n\r\nfunction iniciarMonitoreoContinuo() {\r\n  // Monitorear memoria cada 5 segundos\r\n  setInterval(() => {\r\n    const heapUsado = Math.round(process.memoryUsage().heapUsed / 1024 / 1024);\r\n    console.log(`Heap usado: ${heapUsado} MB`);\r\n  }, 5000);\r\n}\r\n\r\nmonitorearMemoria();\r\n// iniciarMonitoreoContinuo();\n'})}),"\n",(0,s.jsx)(o.h2,{id:"m\xf3dulo-os---informaci\xf3n-del-sistema-operativo",children:"M\xf3dulo OS - Informaci\xf3n del Sistema Operativo"}),"\n",(0,s.jsxs)(o.p,{children:["El m\xf3dulo ",(0,s.jsx)(o.code,{children:"os"})," proporciona informaci\xf3n detallada sobre el sistema operativo y recursos del sistema."]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import os from "os";\r\n\r\nfunction mostrarInfoSistema() {\r\n  console.log("=== INFORMACI\xd3N DEL SISTEMA OPERATIVO ===");\r\n\r\n  // Informaci\xf3n b\xe1sica del sistema\r\n  console.log("Sistema operativo:", os.platform());\r\n  console.log("Tipo de sistema:", os.type());\r\n  console.log("Versi\xf3n del sistema:", os.release());\r\n  console.log("Arquitectura:", os.arch());\r\n  console.log(\r\n    "Tiempo de actividad del sistema:",\r\n    Math.round(os.uptime() / 3600) + " horas"\r\n  );\r\n\r\n  // Informaci\xf3n de memoria\r\n  console.log(\r\n    "Memoria total:",\r\n    Math.round(os.totalmem() / 1024 / 1024 / 1024) + " GB"\r\n  );\r\n  console.log("Memoria libre:", Math.round(os.freemem() / 1024 / 1024) + " MB");\r\n  console.log(\r\n    "Porcentaje de memoria libre:",\r\n    Math.round((os.freemem() / os.totalmem()) * 100) + "%"\r\n  );\r\n\r\n  // Informaci\xf3n de CPU\r\n  const cpus = os.cpus();\r\n  console.log("N\xfamero de CPUs:", cpus.length);\r\n  console.log("Modelo de CPU:", cpus[0].model);\r\n  console.log("Velocidad de CPU:", cpus[0].speed + " MHz");\r\n\r\n  // Informaci\xf3n de red\r\n  console.log("Hostname:", os.hostname());\r\n  console.log("Interfaces de red:");\r\n  const interfaces = os.networkInterfaces();\r\n\r\n  Object.entries(interfaces).forEach(([nombre, direcciones]) => {\r\n    direcciones.forEach((direccion) => {\r\n      if (direccion.family === "IPv4" && !direccion.internal) {\r\n        console.log(`  ${nombre}: ${direccion.address}`);\r\n      }\r\n    });\r\n  });\r\n\r\n  // Informaci\xf3n del usuario\r\n  console.log("Directorio home:", os.homedir());\r\n  console.log("Directorio temporal:", os.tmpdir());\r\n  console.log("Usuario actual:", os.userInfo().username);\r\n}\r\n\r\nmostrarInfoSistema();\n'})}),"\n",(0,s.jsx)(o.h2,{id:"m\xf3dulo-child-process---ejecuci\xf3n-de-procesos-hijos",children:"M\xf3dulo Child Process - Ejecuci\xf3n de Procesos Hijos"}),"\n",(0,s.jsxs)(o.p,{children:["El m\xf3dulo ",(0,s.jsx)(o.code,{children:"child_process"})," permite ejecutar comandos del sistema y otros programas desde Node.js."]}),"\n",(0,s.jsx)(o.h3,{id:"ejecuci\xf3n-sincr\xf3nica-de-comandos",children:"Ejecuci\xf3n Sincr\xf3nica de Comandos"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import { execSync } from "child_process";\r\n\r\nfunction ejecutarComandosSincronos() {\r\n  try {\r\n    console.log("=== EJECUCI\xd3N SINCR\xd3NICA DE COMANDOS ===");\r\n\r\n    // Ejecutar comando simple\r\n    const resultado = execSync("ls -la", { encoding: "utf8" });\r\n    console.log("Listado de directorio:");\r\n    console.log(resultado);\r\n\r\n    // Ejecutar comando con par\xe1metros\r\n    const fecha = execSync("date", { encoding: "utf8" }).trim();\r\n    console.log("Fecha del sistema:", fecha);\r\n\r\n    // Obtener informaci\xf3n del sistema\r\n    const memoriaLibre = execSync("free -h", { encoding: "utf8" });\r\n    console.log("Memoria libre:");\r\n    console.log(memoriaLibre);\r\n  } catch (error) {\r\n    console.error("Error al ejecutar comando:", error.message);\r\n  }\r\n}\r\n\r\nejecutarComandosSincronos();\n'})}),"\n",(0,s.jsx)(o.h3,{id:"ejecuci\xf3n-asincr\xf3nica-de-comandos",children:"Ejecuci\xf3n Asincr\xf3nica de Comandos"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import { exec } from "child_process";\r\n\r\nfunction ejecutarComandoAsincrono(comando) {\r\n  return new Promise((resolve, reject) => {\r\n    console.log(`Ejecutando comando: ${comando}`);\r\n\r\n    exec(comando, { encoding: "utf8" }, (error, stdout, stderr) => {\r\n      if (error) {\r\n        console.error(`Error ejecutando comando: ${error.message}`);\r\n        reject(error);\r\n        return;\r\n      }\r\n\r\n      if (stderr) {\r\n        console.error(`Error est\xe1ndar: ${stderr}`);\r\n      }\r\n\r\n      console.log("Salida del comando:");\r\n      console.log(stdout);\r\n      resolve(stdout);\r\n    });\r\n  });\r\n}\r\n\r\nasync function demostracionComandosAsincronos() {\r\n  try {\r\n    await ejecutarComandoAsincrono("pwd");\r\n    await ejecutarComandoAsincrono("whoami");\r\n    await ejecutarComandoAsincrono(\'echo "Hola desde Node.js"\');\r\n  } catch (error) {\r\n    console.error("Error en demostraci\xf3n:", error.message);\r\n  }\r\n}\r\n\r\ndemostracionComandosAsincronos();\n'})}),"\n",(0,s.jsx)(o.h3,{id:"spawn-para-comandos-con-salida-en-tiempo-real",children:"Spawn para Comandos con Salida en Tiempo Real"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import { spawn } from "child_process";\r\n\r\nfunction ejecutarComandoTiempoReal(comando, argumentos = []) {\r\n  return new Promise((resolve, reject) => {\r\n    console.log(`Ejecutando: ${comando} ${argumentos.join(" ")}`);\r\n\r\n    const proceso = spawn(comando, argumentos);\r\n    let salidaCompleta = "";\r\n\r\n    proceso.stdout.on("data", (data) => {\r\n      const salida = data.toString();\r\n      salidaCompleta += salida;\r\n      console.log("Salida:", salida.trim());\r\n    });\r\n\r\n    proceso.stderr.on("data", (data) => {\r\n      console.error("Error:", data.toString().trim());\r\n    });\r\n\r\n    proceso.on("close", (codigo) => {\r\n      console.log(`Proceso terminado con c\xf3digo: ${codigo}`);\r\n      resolve(salidaCompleta);\r\n    });\r\n\r\n    proceso.on("error", (error) => {\r\n      console.error("Error en el proceso:", error.message);\r\n      reject(error);\r\n    });\r\n  });\r\n}\r\n\r\nasync function demostracionSpawn() {\r\n  try {\r\n    // Comando que produce salida continua\r\n    await ejecutarComandoTiempoReal("find", [\r\n      ".",\r\n      "-name",\r\n      "*.js",\r\n      "-type",\r\n      "f",\r\n    ]);\r\n\r\n    // Comando con pipes (solo Unix)\r\n    // await ejecutarComandoTiempoReal(\'ps\', [\'aux\', \'|\', \'grep\', \'node\']);\r\n  } catch (error) {\r\n    console.error("Error en spawn:", error.message);\r\n  }\r\n}\r\n\r\ndemostracionSpawn();\n'})}),"\n",(0,s.jsx)(o.h2,{id:"m\xf3dulo-worker-threads---hilos-de-trabajo",children:"M\xf3dulo Worker Threads - Hilos de Trabajo"}),"\n",(0,s.jsx)(o.p,{children:"Para operaciones intensivas de CPU, los worker threads permiten ejecutar c\xf3digo JavaScript en paralelo."}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import { Worker, isMainThread, parentPort, workerData } from "worker_threads";\r\n\r\nfunction tareaIntensivaCPU(numero) {\r\n  // Simular una tarea que consume CPU\r\n  let resultado = 0;\r\n  for (let i = 0; i < numero; i++) {\r\n    resultado += Math.sqrt(i) * Math.sin(i);\r\n  }\r\n  return resultado;\r\n}\r\n\r\nif (isMainThread) {\r\n  // C\xf3digo del hilo principal\r\n  async function ejecutarConWorkerThreads() {\r\n    console.log("=== WORKER THREADS DEMOSTRACI\xd3N ===");\r\n\r\n    const tareas = [10000000, 20000000, 30000000];\r\n    const workers = [];\r\n\r\n    for (let i = 0; i < tareas.length; i++) {\r\n      const worker = new Worker(new URL(import.meta.url), {\r\n        workerData: { valor: tareas[i], id: i + 1 },\r\n      });\r\n\r\n      workers.push(\r\n        new Promise((resolve, reject) => {\r\n          worker.on("message", resolve);\r\n          worker.on("error", reject);\r\n          worker.on("exit", (code) => {\r\n            if (code !== 0) {\r\n              reject(new Error(`Worker se detuvo con c\xf3digo ${code}`));\r\n            }\r\n          });\r\n        })\r\n      );\r\n    }\r\n\r\n    console.log("Ejecutando tareas intensivas en workers paralelos...");\r\n    const inicio = Date.now();\r\n\r\n    try {\r\n      const resultados = await Promise.all(workers);\r\n      const duracion = Date.now() - inicio;\r\n\r\n      console.log(`Todas las tareas completadas en ${duracion}ms`);\r\n      resultados.forEach((resultado, index) => {\r\n        console.log(`Worker ${index + 1}: ${resultado}`);\r\n      });\r\n    } catch (error) {\r\n      console.error("Error en workers:", error.message);\r\n    }\r\n  }\r\n\r\n  ejecutarConWorkerThreads();\r\n} else {\r\n  // C\xf3digo del worker thread\r\n  const resultado = tareaIntensivaCPU(workerData.valor);\r\n  parentPort.postMessage(`Tarea ${workerData.id} completada: ${resultado}`);\r\n}\n'})}),"\n",(0,s.jsx)(o.h2,{id:"manejo-de-se\xf1ales-del-sistema",children:"Manejo de Se\xf1ales del Sistema"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'function configurarManejoSe\xf1ales() {\r\n  console.log("=== MANEJO DE SE\xd1ALES DEL SISTEMA ===");\r\n  console.log("Proceso ID:", process.pid);\r\n  console.log("Env\xeda se\xf1ales con: kill -SE\xd1AL", process.pid);\r\n\r\n  // Manejar se\xf1al de interrupci\xf3n (Ctrl+C)\r\n  process.on("SIGINT", () => {\r\n    console.log("\\\\nRecibida se\xf1al SIGINT (Ctrl+C). Cerrando limpiamente...");\r\n    // Realizar limpieza antes de salir\r\n    setTimeout(() => {\r\n      console.log("Limpieza completada. Saliendo.");\r\n      process.exit(0);\r\n    }, 1000);\r\n  });\r\n\r\n  // Manejar se\xf1al de terminaci\xf3n\r\n  process.on("SIGTERM", () => {\r\n    console.log("Recibida se\xf1al SIGTERM. Realizando shutdown graceful...");\r\n    // Cerrar conexiones, guardar estado, etc.\r\n    process.exit(0);\r\n  });\r\n\r\n  // Manejar cierre inesperado\r\n  process.on("uncaughtException", (error) => {\r\n    console.error("Error no capturado:", error);\r\n    // En producci\xf3n, podr\xedas registrar el error y continuar\r\n    process.exit(1);\r\n  });\r\n\r\n  process.on("unhandledRejection", (reason, promise) => {\r\n    console.error("Promise rechazada no manejada:", reason);\r\n    // En producci\xf3n, registrar y posiblemente continuar\r\n  });\r\n\r\n  // Mantener el proceso activo\r\n  console.log("Proceso ejecut\xe1ndose. Presiona Ctrl+C para terminar.");\r\n}\r\n\r\nconfigurarManejoSe\xf1ales();\n'})}),"\n",(0,s.jsx)(o.h2,{id:"ejemplo-pr\xe1ctico-monitor-del-sistema",children:"Ejemplo Pr\xe1ctico: Monitor del Sistema"}),"\n",(0,s.jsx)(o.p,{children:"Vamos a crear un monitor completo del sistema que combine todos los conceptos:"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import os from "os";\r\nimport { exec } from "child_process";\r\n\r\nclass MonitorSistema {\r\n  constructor() {\r\n    this.datosHistoricos = [];\r\n    this.intervaloMonitoreo = null;\r\n  }\r\n\r\n  obtenerUsoCPU() {\r\n    const cpus = os.cpus();\r\n    let totalIdle = 0;\r\n    let totalTick = 0;\r\n\r\n    cpus.forEach((cpu) => {\r\n      for (const type in cpu.times) {\r\n        totalTick += cpu.times[type];\r\n      }\r\n      totalIdle += cpu.times.idle;\r\n    });\r\n\r\n    return {\r\n      total: totalTick,\r\n      idle: totalIdle,\r\n      uso: 100 - Math.round((100 * totalIdle) / totalTick),\r\n    };\r\n  }\r\n\r\n  obtenerEstadoMemoria() {\r\n    const total = os.totalmem();\r\n    const libre = os.freemem();\r\n    const usado = total - libre;\r\n\r\n    return {\r\n      total: Math.round(total / 1024 / 1024),\r\n      libre: Math.round(libre / 1024 / 1024),\r\n      usado: Math.round(usado / 1024 / 1024),\r\n      porcentaje: Math.round((usado / total) * 100),\r\n    };\r\n  }\r\n\r\n  obtenerEstadoSistema() {\r\n    const memoria = this.obtenerEstadoMemoria();\r\n    const cpu = this.obtenerUsoCPU();\r\n\r\n    return {\r\n      timestamp: new Date().toISOString(),\r\n      plataforma: os.platform(),\r\n      tiempoActividad: Math.round(os.uptime() / 3600),\r\n      memoria: memoria,\r\n      cpu: cpu,\r\n      cargaSistema: os.loadavg(),\r\n      procesosNode: {\r\n        memoria: Math.round(process.memoryUsage().rss / 1024 / 1024),\r\n        pid: process.pid,\r\n      },\r\n    };\r\n  }\r\n\r\n  iniciarMonitoreo(intervalo = 5000) {\r\n    console.log("Iniciando monitor del sistema...");\r\n    console.log("Intervalo de monitoreo:", intervalo + "ms");\r\n\r\n    this.intervaloMonitoreo = setInterval(() => {\r\n      const estado = this.obtenerEstadoSistema();\r\n      this.datosHistoricos.push(estado);\r\n\r\n      // Mantener solo los \xfaltimos 100 registros\r\n      if (this.datosHistoricos.length > 100) {\r\n        this.datosHistoricos.shift();\r\n      }\r\n\r\n      this.mostrarEstadoActual(estado);\r\n    }, intervalo);\r\n  }\r\n\r\n  detenerMonitoreo() {\r\n    if (this.intervaloMonitoreo) {\r\n      clearInterval(this.intervaloMonitoreo);\r\n      console.log("Monitor detenido");\r\n    }\r\n  }\r\n\r\n  mostrarEstadoActual(estado) {\r\n    console.log("\\\\n--- ESTADO DEL SISTEMA ---");\r\n    console.log("Hora:", new Date().toLocaleTimeString());\r\n    console.log(\r\n      `Memoria: ${estado.memoria.usado}MB / ${estado.memoria.total}MB (${estado.memoria.porcentaje}%)`\r\n    );\r\n    console.log(`CPU: ${estado.cpu.uso}% de uso`);\r\n    console.log(\r\n      `Carga del sistema: ${estado.cargaSistema[0].toFixed(2)} (1min)`\r\n    );\r\n    console.log(`Proceso Node: ${estado.procesosNode.memoria}MB RSS`);\r\n  }\r\n\r\n  generarReporte() {\r\n    if (this.datosHistoricos.length === 0) {\r\n      console.log("No hay datos de monitoreo disponibles");\r\n      return;\r\n    }\r\n\r\n    const usoCPUPromedio =\r\n      this.datosHistoricos.reduce((sum, dato) => sum + dato.cpu.uso, 0) /\r\n      this.datosHistoricos.length;\r\n\r\n    const memoriaPromedio =\r\n      this.datosHistoricos.reduce(\r\n        (sum, dato) => sum + dato.memoria.porcentaje,\r\n        0\r\n      ) / this.datosHistoricos.length;\r\n\r\n    console.log("\\\\n=== REPORTE DE MONITOREO ===");\r\n    console.log(\r\n      "Per\xedodo de monitoreo:",\r\n      this.datosHistoricos.length,\r\n      "muestras"\r\n    );\r\n    console.log("Uso de CPU promedio:", usoCPUPromedio.toFixed(2) + "%");\r\n    console.log("Uso de memoria promedio:", memoriaPromedio.toFixed(2) + "%");\r\n    console.log(\r\n      "Tiempo m\xe1ximo de actividad:",\r\n      this.datosHistoricos[this.datosHistoricos.length - 1].tiempoActividad +\r\n        " horas"\r\n    );\r\n  }\r\n\r\n  ejecutarComandoPersonalizado(comando) {\r\n    return new Promise((resolve, reject) => {\r\n      exec(comando, { encoding: "utf8" }, (error, stdout, stderr) => {\r\n        if (error) {\r\n          reject(error);\r\n          return;\r\n        }\r\n        resolve(stdout || stderr);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\n// Uso del monitor\r\nasync function demostracionMonitor() {\r\n  const monitor = new MonitorSistema();\r\n\r\n  // Configurar manejo de se\xf1ales\r\n  process.on("SIGINT", () => {\r\n    console.log("\\\\nDeteniendo monitor...");\r\n    monitor.detenerMonitoreo();\r\n    monitor.generarReporte();\r\n    process.exit(0);\r\n  });\r\n\r\n  // Iniciar monitoreo\r\n  monitor.iniciarMonitoreo(3000);\r\n\r\n  // Ejecutar algunos comandos despu\xe9s de 15 segundos\r\n  setTimeout(async () => {\r\n    try {\r\n      console.log("\\\\n--- EJECUTANDO COMANDOS DEL SISTEMA ---");\r\n      const espacioDisco = await monitor.ejecutarComandoPersonalizado("df -h");\r\n      console.log("Espacio en disco:");\r\n      console.log(espacioDisco);\r\n    } catch (error) {\r\n      console.error("Error al ejecutar comando:", error.message);\r\n    }\r\n  }, 15000);\r\n\r\n  // Detener autom\xe1ticamente despu\xe9s de 30 segundos para la demostraci\xf3n\r\n  setTimeout(() => {\r\n    console.log("\\\\n--- DEMOSTRACI\xd3N COMPLETADA ---");\r\n    monitor.detenerMonitoreo();\r\n    monitor.generarReporte();\r\n    process.exit(0);\r\n  }, 30000);\r\n}\r\n\r\n// Ejecutar la demostraci\xf3n\r\n// demostracionMonitor();\n'})}),"\n",(0,s.jsx)(o.h2,{id:"gesti\xf3n-de-procesos-en-producci\xf3n",children:"Gesti\xf3n de Procesos en Producci\xf3n"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-jsx",children:'import cluster from "cluster";\r\nimport os from "os";\r\n\r\nif (cluster.isPrimary) {\r\n  console.log("=== CLUSTER MODE - PROCESS MANAGER ===");\r\n  console.log("Proceso principal PID:", process.pid);\r\n  console.log("CPUs disponibles:", os.cpus().length);\r\n\r\n  // Crear un worker por CPU\r\n  const numCPUs = os.cpus().length;\r\n  for (let i = 0; i < numCPUs; i++) {\r\n    cluster.fork();\r\n  }\r\n\r\n  // Manejar eventos de workers\r\n  cluster.on("online", (worker) => {\r\n    console.log(`Worker ${worker.process.pid} iniciado`);\r\n  });\r\n\r\n  cluster.on("exit", (worker, code, signal) => {\r\n    console.log(`Worker ${worker.process.pid} terminado`);\r\n    console.log("Iniciando nuevo worker...");\r\n    cluster.fork();\r\n  });\r\n\r\n  // Manejar se\xf1ales para shutdown graceful\r\n  process.on("SIGTERM", () => {\r\n    console.log("Recibido SIGTERM, cerrando workers...");\r\n    for (const id in cluster.workers) {\r\n      cluster.workers[id].kill("SIGTERM");\r\n    }\r\n  });\r\n} else {\r\n  // C\xf3digo de los workers\r\n  console.log(`Worker ${process.pid} ejecut\xe1ndose`);\r\n\r\n  // Simular una aplicaci\xf3n web/API\r\n  const http = await import("http");\r\n  const server = http.createServer((req, res) => {\r\n    res.writeHead(200, { "Content-Type": "text/plain" });\r\n    res.end(`Respuesta desde worker ${process.pid}\\\\n`);\r\n  });\r\n\r\n  server.listen(3000, () => {\r\n    console.log(`Worker ${process.pid} escuchando en puerto 3000`);\r\n  });\r\n}\n'})}),"\n",(0,s.jsx)(o.h2,{id:"conclusi\xf3n",children:"Conclusi\xf3n"}),"\n",(0,s.jsx)(o.p,{children:"El manejo de procesos en Node.js con ES Modules proporciona capacidades completas para:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:"Monitorear y controlar el proceso actual de Node.js"}),"\n",(0,s.jsx)(o.li,{children:"Obtener informaci\xf3n detallada del sistema operativo"}),"\n",(0,s.jsx)(o.li,{children:"Ejecutar comandos del sistema y otros programas"}),"\n",(0,s.jsx)(o.li,{children:"Aprovechar m\xfaltiples n\xfacleos de CPU con worker threads"}),"\n",(0,s.jsx)(o.li,{children:"Crear aplicaciones en cluster para producci\xf3n"}),"\n",(0,s.jsx)(o.li,{children:"Manejar se\xf1ales del sistema para shutdown graceful"}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"Estas capacidades son esenciales para construir aplicaciones robustas que necesitan interactuar con el sistema operativo, gestionar recursos eficientemente y escalar en entornos de producci\xf3n."})]})}function m(r={}){const{wrapper:o}={...(0,a.R)(),...r.components};return o?(0,s.jsx)(o,{...r,children:(0,s.jsx)(d,{...r})}):d(r)}},8453:(r,o,e)=>{e.d(o,{R:()=>c,x:()=>i});var n=e(6540);const s={},a=n.createContext(s);function c(r){const o=n.useContext(a);return n.useMemo(function(){return"function"==typeof r?r(o):{...o,...r}},[o,r])}function i(r){let o;return o=r.disableParentContext?"function"==typeof r.components?r.components(s):r.components||s:c(r.components),n.createElement(a.Provider,{value:o},r.children)}}}]);