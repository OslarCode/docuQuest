"use strict";(globalThis.webpackChunkDocuQuest_oslar_code=globalThis.webpackChunkDocuQuest_oslar_code||[]).push([[192],{2531:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>c,contentTitle:()=>t,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"backend/Node.js/manejoDeRutas","title":"Gu\xeda de Manejo de Rutas en Node.js con ES Modules","description":"Introducci\xf3n al Sistema de Rutas en Node.js","source":"@site/docs/backend/Node.js/manejoDeRutas.md","sourceDirName":"backend/Node.js","slug":"/backend/Node.js/manejoDeRutas","permalink":"/docuQuest/docs/backend/Node.js/manejoDeRutas","draft":false,"unlisted":false,"editUrl":"https://github.com/OslarCode/OslarCode/docs/backend/Node.js/manejoDeRutas.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"M\xf3dulos y gesti\xf3n de dependencias con NPM","permalink":"/docuQuest/docs/backend/Node.js/modulosGestionDependenciasNPM"},"next":{"title":"Manejo del sistema de archivos con Node.js ES Modules","permalink":"/docuQuest/docs/backend/Node.js/manejoDeArchivos"}}');var o=n(4848),s=n(8453);const i={},t="Gu\xeda de Manejo de Rutas en Node.js con ES Modules",c={},d=[{value:"Introducci\xf3n al Sistema de Rutas en Node.js",id:"introducci\xf3n-al-sistema-de-rutas-en-nodejs",level:2},{value:"Importante: Diferencia entre CommonJS y ES Modules",id:"importante-diferencia-entre-commonjs-y-es-modules",level:2},{value:"Explicaci\xf3n de <code>__dirname</code> y <code>__filename</code> en ES Modules",id:"explicaci\xf3n-de-__dirname-y-__filename-en-es-modules",level:3},{value:"C\xf3mo obtener <code>__dirname</code> y <code>__filename</code> en ES Modules",id:"c\xf3mo-obtener-__dirname-y-__filename-en-es-modules",level:3},{value:"Ejemplo de problema com\xfan y soluci\xf3n",id:"ejemplo-de-problema-com\xfan-y-soluci\xf3n",level:3},{value:"M\xf3dulo Path - Manejo de Rutas del Sistema de Archivos",id:"m\xf3dulo-path---manejo-de-rutas-del-sistema-de-archivos",level:2},{value:"M\xe9todos Principales del M\xf3dulo Path",id:"m\xe9todos-principales-del-m\xf3dulo-path",level:3},{value:"path.join() - Unir Segmentos de Ruta",id:"pathjoin---unir-segmentos-de-ruta",level:4},{value:"path.resolve() - Resolver Rutas Absolutas",id:"pathresolve---resolver-rutas-absolutas",level:4},{value:"path.dirname() - Obtener Directorio Padre",id:"pathdirname---obtener-directorio-padre",level:4},{value:"path.basename() - Obtener Nombre del Archivo",id:"pathbasename---obtener-nombre-del-archivo",level:4},{value:"path.extname() - Obtener Extensi\xf3n del Archivo",id:"pathextname---obtener-extensi\xf3n-del-archivo",level:4},{value:"M\xf3dulo URL - Manejo de URLs",id:"m\xf3dulo-url---manejo-de-urls",level:2},{value:"Importaci\xf3n y Uso B\xe1sico",id:"importaci\xf3n-y-uso-b\xe1sico",level:3},{value:"An\xe1lisis de Par\xe1metros de Consulta",id:"an\xe1lisis-de-par\xe1metros-de-consulta",level:3},{value:"Implementaci\xf3n de un Servidor HTTP con Manejo de Rutas",id:"implementaci\xf3n-de-un-servidor-http-con-manejo-de-rutas",level:2},{value:"Servidor B\xe1sico con Enrutamiento",id:"servidor-b\xe1sico-con-enrutamiento",level:3},{value:"Sistema de Enrutamiento Avanzado con Par\xe1metros",id:"sistema-de-enrutamiento-avanzado-con-par\xe1metros",level:2},{value:"Implementaci\xf3n de Rutas con Par\xe1metros",id:"implementaci\xf3n-de-rutas-con-par\xe1metros",level:3},{value:"Mejores Pr\xe1cticas y Consideraciones",id:"mejores-pr\xe1cticas-y-consideraciones",level:2},{value:"1. Validaci\xf3n de Rutas",id:"1-validaci\xf3n-de-rutas",level:3},{value:"2. Configuraci\xf3n de MIME Types",id:"2-configuraci\xf3n-de-mime-types",level:3},{value:"3. Manejo de Errores Centralizado",id:"3-manejo-de-errores-centralizado",level:3},{value:"Conclusi\xf3n",id:"conclusi\xf3n",level:2}];function l(e){const r={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(r.header,{children:(0,o.jsx)(r.h1,{id:"gu\xeda-de-manejo-de-rutas-en-nodejs-con-es-modules",children:"Gu\xeda de Manejo de Rutas en Node.js con ES Modules"})}),"\n",(0,o.jsx)(r.h2,{id:"introducci\xf3n-al-sistema-de-rutas-en-nodejs",children:"Introducci\xf3n al Sistema de Rutas en Node.js"}),"\n",(0,o.jsxs)(r.p,{children:["Node.js proporciona m\xf3dulos nativos para el manejo de rutas de archivos y URLs. Los principales m\xf3dulos son ",(0,o.jsx)(r.code,{children:"path"})," y ",(0,o.jsx)(r.code,{children:"url"}),", que ofrecen utilidades para trabajar con rutas del sistema de archivos y URLs respectivamente."]}),"\n",(0,o.jsx)(r.h2,{id:"importante-diferencia-entre-commonjs-y-es-modules",children:"Importante: Diferencia entre CommonJS y ES Modules"}),"\n",(0,o.jsxs)(r.h3,{id:"explicaci\xf3n-de-__dirname-y-__filename-en-es-modules",children:["Explicaci\xf3n de ",(0,o.jsx)(r.code,{children:"__dirname"})," y ",(0,o.jsx)(r.code,{children:"__filename"})," en ES Modules"]}),"\n",(0,o.jsxs)(r.p,{children:["En CommonJS (el sistema de m\xf3dulos antiguo de Node.js), las variables ",(0,o.jsx)(r.code,{children:"__dirname"})," y ",(0,o.jsx)(r.code,{children:"__filename"})," estaban disponibles autom\xe1ticamente. Sin embargo, en ES Modules (el est\xe1ndar moderno) necesitamos construirlas manualmente."]}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.strong,{children:"\xbfPor qu\xe9 este cambio?"})}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsx)(r.li,{children:"ES Modules es un est\xe1ndar universal de JavaScript que funciona en navegadores y otros entornos"}),"\n",(0,o.jsxs)(r.li,{children:["Los navegadores no tienen sistema de archivos, por lo que ",(0,o.jsx)(r.code,{children:"__dirname"})," no tiene sentido all\xed"]}),"\n",(0,o.jsxs)(r.li,{children:["Node.js se adapta al est\xe1ndar usando ",(0,o.jsx)(r.code,{children:"import.meta.url"})]}),"\n"]}),"\n",(0,o.jsxs)(r.h3,{id:"c\xf3mo-obtener-__dirname-y-__filename-en-es-modules",children:["C\xf3mo obtener ",(0,o.jsx)(r.code,{children:"__dirname"})," y ",(0,o.jsx)(r.code,{children:"__filename"})," en ES Modules"]}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import path from "path";\r\nimport { fileURLToPath } from "url";\r\n\r\n// En ES Modules, necesitamos obtener __dirname y __filename de esta manera\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconsole.log("Ruta del archivo:", __filename);\r\nconsole.log("Directorio:", __dirname);\n'})}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.strong,{children:"Desglose del proceso:"})}),"\n",(0,o.jsxs)(r.ol,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"import.meta.url"})," contiene la URL del m\xf3dulo actual (ej: ",(0,o.jsx)(r.code,{children:'"file:///usuarios/proyecto/src/app.js"'}),")"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"fileURLToPath()"})," convierte la URL a una ruta del sistema de archivos"]}),"\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.code,{children:"path.dirname()"})," extrae el directorio de la ruta del archivo"]}),"\n"]}),"\n",(0,o.jsx)(r.h3,{id:"ejemplo-de-problema-com\xfan-y-soluci\xf3n",children:"Ejemplo de problema com\xfan y soluci\xf3n"}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.strong,{children:"\u274c INCORRECTO (no funciona en ES Modules):"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Esto causar\xe1 error porque __dirname no existe en ES Modules\r\nconst ruta = __dirname + "/archivos/config.json";\n'})}),"\n",(0,o.jsx)(r.p,{children:(0,o.jsx)(r.strong,{children:"\u2705 CORRECTO (funciona en ES Modules):"})}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import { fileURLToPath } from "url";\r\nimport path from "path";\r\n\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconst ruta = path.join(__dirname, "archivos", "config.json");\n'})}),"\n",(0,o.jsx)(r.h2,{id:"m\xf3dulo-path---manejo-de-rutas-del-sistema-de-archivos",children:"M\xf3dulo Path - Manejo de Rutas del Sistema de Archivos"}),"\n",(0,o.jsx)(r.h3,{id:"m\xe9todos-principales-del-m\xf3dulo-path",children:"M\xe9todos Principales del M\xf3dulo Path"}),"\n",(0,o.jsx)(r.h4,{id:"pathjoin---unir-segmentos-de-ruta",children:"path.join() - Unir Segmentos de Ruta"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Une m\xfaltiples segmentos de ruta normalizando el resultado\r\nconst rutaCompleta = path.join(\r\n  __dirname,\r\n  "archivos",\r\n  "documentos",\r\n  "..",\r\n  "imagenes"\r\n);\r\nconsole.log(rutaCompleta);\r\n// Ejemplo de salida: /ruta/al/proyecto/archivos/imagenes\r\n\r\n// Uso pr\xe1ctico para servir archivos est\xe1ticos\r\nconst rutaArchivo = path.join(__dirname, "public", "css", "estilos.css");\r\nconsole.log(`Sirviendo archivo: ${rutaArchivo}`);\n'})}),"\n",(0,o.jsx)(r.h4,{id:"pathresolve---resolver-rutas-absolutas",children:"path.resolve() - Resolver Rutas Absolutas"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Resuelve una secuencia de rutas en una ruta absoluta\r\nconst rutaAbsoluta = path.resolve("src", "components", "Header.jsx");\r\nconsole.log(rutaAbsoluta);\r\n// Ejemplo: /ruta/actual/src/components/Header.jsx\r\n\r\n// Resoluci\xf3n con m\xfaltiples argumentos\r\nconst configPath = path.resolve(__dirname, "config", "database.json");\r\nconsole.log(`Archivo de configuraci\xf3n: ${configPath}`);\n'})}),"\n",(0,o.jsx)(r.h4,{id:"pathdirname---obtener-directorio-padre",children:"path.dirname() - Obtener Directorio Padre"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Obtiene el directorio de una ruta\r\nconst directorio = path.dirname("/usuarios/juan/proyecto/src/app.js");\r\nconsole.log(directorio); // /usuarios/juan/proyecto/src\r\n\r\n// Uso con __filename\r\nconsole.log(`Directorio actual: ${__dirname}`);\n'})}),"\n",(0,o.jsx)(r.h4,{id:"pathbasename---obtener-nombre-del-archivo",children:"path.basename() - Obtener Nombre del Archivo"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Obtiene la \xfaltima parte de una ruta\r\nconst nombreArchivo = path.basename("/usuarios/juan/documento.txt");\r\nconsole.log(nombreArchivo); // documento.txt\r\n\r\n// Con segundo par\xe1metro para eliminar extensi\xf3n\r\nconst nombreSinExtension = path.basename(\r\n  "/usuarios/juan/documento.txt",\r\n  ".txt"\r\n);\r\nconsole.log(nombreSinExtension); // documento\n'})}),"\n",(0,o.jsx)(r.h4,{id:"pathextname---obtener-extensi\xf3n-del-archivo",children:"path.extname() - Obtener Extensi\xf3n del Archivo"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Obtiene la extensi\xf3n del archivo\r\nconst extension = path.extname("/usuarios/juan/imagen.jpg");\r\nconsole.log(extension); // .jpg\r\n\r\n// Detecci\xf3n de tipos de archivo\r\nconst archivo = "/ruta/al/archivo.js";\r\nif (path.extname(archivo) === ".js") {\r\n  console.log("Es un archivo JavaScript");\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"m\xf3dulo-url---manejo-de-urls",children:"M\xf3dulo URL - Manejo de URLs"}),"\n",(0,o.jsx)(r.h3,{id:"importaci\xf3n-y-uso-b\xe1sico",children:"Importaci\xf3n y Uso B\xe1sico"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import { URL } from "url";\r\n\r\n// Crear una nueva instancia de URL\r\nconst miUrl = new URL(\r\n  "https://ejemplo.com:8080/ruta/api?usuario=john&pagina=1#seccion"\r\n);\r\n\r\nconsole.log(miUrl.protocol); // https:\r\nconsole.log(miUrl.hostname); // ejemplo.com\r\nconsole.log(miUrl.port); // 8080\r\nconsole.log(miUrl.pathname); // /ruta/api\r\nconsole.log(miUrl.search); // ?usuario=john&pagina=1\r\nconsole.log(miUrl.hash); // #seccion\n'})}),"\n",(0,o.jsx)(r.h3,{id:"an\xe1lisis-de-par\xe1metros-de-consulta",children:"An\xe1lisis de Par\xe1metros de Consulta"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'// Obtener par\xe1metros de consulta\r\nconst parametros = miUrl.searchParams;\r\n\r\nconsole.log(parametros.get("usuario")); // john\r\nconsole.log(parametros.get("pagina")); // 1\r\nconsole.log(parametros.has("busqueda")); // false\r\n\r\n// Iterar sobre todos los par\xe1metros\r\nfor (const [clave, valor] of parametros) {\r\n  console.log(`${clave}: ${valor}`);\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"implementaci\xf3n-de-un-servidor-http-con-manejo-de-rutas",children:"Implementaci\xf3n de un Servidor HTTP con Manejo de Rutas"}),"\n",(0,o.jsx)(r.h3,{id:"servidor-b\xe1sico-con-enrutamiento",children:"Servidor B\xe1sico con Enrutamiento"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import http from "http";\r\nimport path from "path";\r\nimport { fileURLToPath } from "url";\r\nimport fs from "fs/promises";\r\n\r\n// Obtener __dirname y __filename para ES Modules\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nconst server = http.createServer(async (req, res) => {\r\n  // Extraer la ruta solicitada\r\n  const url = new URL(req.url, `http://${req.headers.host}`);\r\n  const rutaSolicitada = url.pathname;\r\n\r\n  console.log(`Solicitud recibida: ${rutaSolicitada}`);\r\n\r\n  // Configurar headers b\xe1sicos\r\n  res.setHeader("Content-Type", "text/html; charset=utf-8");\r\n\r\n  try {\r\n    // Enrutamiento basado en la ruta solicitada\r\n    switch (rutaSolicitada) {\r\n      case "/":\r\n        await servirPaginaInicio(res);\r\n        break;\r\n      case "/acerca":\r\n        await servirPaginaAcerca(res);\r\n        break;\r\n      case "/contacto":\r\n        await servirPaginaContacto(res);\r\n        break;\r\n      default:\r\n        // Verificar si es un archivo est\xe1tico\r\n        if (await esArchivoEstatico(rutaSolicitada)) {\r\n          await servirArchivoEstatico(rutaSolicitada, res);\r\n        } else {\r\n          servirError404(res, rutaSolicitada);\r\n        }\r\n    }\r\n  } catch (error) {\r\n    console.error("Error al procesar solicitud:", error);\r\n    servirError500(res, error);\r\n  }\r\n});\r\n\r\n// Funci\xf3n para servir la p\xe1gina de inicio\r\nasync function servirPaginaInicio(res) {\r\n  const contenido = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>P\xe1gina de Inicio</title>\r\n        </head>\r\n        <body>\r\n            <h1>Bienvenido a la P\xe1gina de Inicio</h1>\r\n            <nav>\r\n                <a href="/">Inicio</a> | \r\n                <a href="/acerca">Acerca</a> | \r\n                <a href="/contacto">Contacto</a>\r\n            </nav>\r\n            <p>Esta es la p\xe1gina principal del sitio.</p>\r\n        </body>\r\n        </html>\r\n    `;\r\n\r\n  res.statusCode = 200;\r\n  res.end(contenido);\r\n}\r\n\r\n// Funci\xf3n para servir la p\xe1gina "Acerca de"\r\nasync function servirPaginaAcerca(res) {\r\n  const contenido = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>Acerca de Nosotros</title>\r\n        </head>\r\n        <body>\r\n            <h1>Acerca de Nosotros</h1>\r\n            <nav>\r\n                <a href="/">Inicio</a> | \r\n                <a href="/acerca">Acerca</a> | \r\n                <a href="/contacto">Contacto</a>\r\n            </nav>\r\n            <p>Informaci\xf3n sobre nuestra empresa.</p>\r\n        </body>\r\n        </html>\r\n    `;\r\n\r\n  res.statusCode = 200;\r\n  res.end(contenido);\r\n}\r\n\r\n// Funci\xf3n para verificar y servir archivos est\xe1ticos\r\nasync function esArchivoEstatico(ruta) {\r\n  const extensionesPermitidas = [\r\n    ".css",\r\n    ".js",\r\n    ".png",\r\n    ".jpg",\r\n    ".json",\r\n    ".txt",\r\n  ];\r\n  const extension = path.extname(ruta);\r\n  return extensionesPermitidas.includes(extension);\r\n}\r\n\r\nasync function servirArchivoEstatico(rutaSolicitada, res) {\r\n  try {\r\n    // Construir ruta completa al archivo usando path.join()\r\n    const rutaCompleta = path.join(__dirname, "public", rutaSolicitada);\r\n\r\n    // Leer el archivo\r\n    const contenido = await fs.readFile(rutaCompleta);\r\n\r\n    // Determinar el tipo de contenido basado en la extensi\xf3n\r\n    const extension = path.extname(rutaSolicitada);\r\n    const tiposMIME = {\r\n      ".css": "text/css",\r\n      ".js": "application/javascript",\r\n      ".png": "image/png",\r\n      ".jpg": "image/jpeg",\r\n      ".json": "application/json",\r\n      ".txt": "text/plain",\r\n    };\r\n\r\n    res.setHeader(\r\n      "Content-Type",\r\n      tiposMIME[extension] || "application/octet-stream"\r\n    );\r\n    res.statusCode = 200;\r\n    res.end(contenido);\r\n  } catch (error) {\r\n    if (error.code === "ENOENT") {\r\n      servirError404(res, rutaSolicitada);\r\n    } else {\r\n      throw error;\r\n    }\r\n  }\r\n}\r\n\r\n// Funciones de manejo de errores\r\nfunction servirError404(res, ruta) {\r\n  res.statusCode = 404;\r\n  res.end(`\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>P\xe1gina No Encontrada</title>\r\n        </head>\r\n        <body>\r\n            <h1>Error 404 - P\xe1gina No Encontrada</h1>\r\n            <p>La ruta "${ruta}" no existe en este servidor.</p>\r\n            <a href="/">Volver al Inicio</a>\r\n        </body>\r\n        </html>\r\n    `);\r\n}\r\n\r\nfunction servirError500(res, error) {\r\n  res.statusCode = 500;\r\n  res.end(`\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n            <title>Error del Servidor</title>\r\n        </head>\r\n        <body>\r\n            <h1>Error 500 - Error Interno del Servidor</h1>\r\n            <p>Ha ocurrido un error inesperado.</p>\r\n            <pre>${error.message}</pre>\r\n            <a href="/">Volver al Inicio</a>\r\n        </body>\r\n        </html>\r\n    `);\r\n}\r\n\r\n// Iniciar el servidor\r\nconst PORT = 3000;\r\nserver.listen(PORT, () => {\r\n  console.log(`Servidor ejecut\xe1ndose en http://localhost:${PORT}`);\r\n});\n'})}),"\n",(0,o.jsx)(r.h2,{id:"sistema-de-enrutamiento-avanzado-con-par\xe1metros",children:"Sistema de Enrutamiento Avanzado con Par\xe1metros"}),"\n",(0,o.jsx)(r.h3,{id:"implementaci\xf3n-de-rutas-con-par\xe1metros",children:"Implementaci\xf3n de Rutas con Par\xe1metros"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import http from "http";\r\nimport { URL } from "url";\r\n\r\n// Base de datos simulada\r\nconst usuarios = [\r\n  { id: 1, nombre: "Ana Garc\xeda", email: "ana@ejemplo.com" },\r\n  { id: 2, nombre: "Carlos L\xf3pez", email: "carlos@ejemplo.com" },\r\n  { id: 3, nombre: "Mar\xeda Rodr\xedguez", email: "maria@ejemplo.com" },\r\n];\r\n\r\nconst server = http.createServer(async (req, res) => {\r\n  const url = new URL(req.url, `http://${req.headers.host}`);\r\n  const ruta = url.pathname;\r\n\r\n  res.setHeader("Content-Type", "application/json; charset=utf-8");\r\n\r\n  try {\r\n    // Enrutamiento para API REST\r\n    if (ruta.startsWith("/api/usuarios")) {\r\n      await manejarRutaUsuarios(ruta, req.method, res, url);\r\n    } else {\r\n      res.statusCode = 404;\r\n      res.end(JSON.stringify({ error: "Endpoint no encontrado" }));\r\n    }\r\n  } catch (error) {\r\n    console.error("Error:", error);\r\n    res.statusCode = 500;\r\n    res.end(JSON.stringify({ error: "Error interno del servidor" }));\r\n  }\r\n});\r\n\r\nasync function manejarRutaUsuarios(ruta, metodo, res, url) {\r\n  // Extraer ID de usuario si est\xe1 presente\r\n  const partesRuta = ruta.split("/").filter((parte) => parte !== "");\r\n  const tieneId = partesRuta.length === 3 && !isNaN(partesRuta[2]);\r\n\r\n  if (metodo === "GET") {\r\n    if (ruta === "/api/usuarios") {\r\n      // GET /api/usuarios - Listar todos los usuarios\r\n      res.statusCode = 200;\r\n      res.end(JSON.stringify(usuarios));\r\n    } else if (tieneId) {\r\n      // GET /api/usuarios/:id - Obtener usuario espec\xedfico\r\n      const userId = parseInt(partesRuta[2]);\r\n      const usuario = usuarios.find((u) => u.id === userId);\r\n\r\n      if (usuario) {\r\n        res.statusCode = 200;\r\n        res.end(JSON.stringify(usuario));\r\n      } else {\r\n        res.statusCode = 404;\r\n        res.end(JSON.stringify({ error: "Usuario no encontrado" }));\r\n      }\r\n    }\r\n  } else if (metodo === "POST" && ruta === "/api/usuarios") {\r\n    // POST /api/usuarios - Crear nuevo usuario\r\n    await crearUsuario(req, res);\r\n  } else {\r\n    res.statusCode = 405;\r\n    res.end(JSON.stringify({ error: "M\xe9todo no permitido" }));\r\n  }\r\n}\r\n\r\n// Funci\xf3n para crear usuario (simplificada)\r\nfunction crearUsuario(req, res) {\r\n  let body = "";\r\n\r\n  req.on("data", (chunk) => {\r\n    body += chunk.toString();\r\n  });\r\n\r\n  req.on("end", () => {\r\n    try {\r\n      const nuevoUsuario = JSON.parse(body);\r\n      nuevoUsuario.id = usuarios.length + 1;\r\n      usuarios.push(nuevoUsuario);\r\n\r\n      res.statusCode = 201;\r\n      res.end(JSON.stringify(nuevoUsuario));\r\n    } catch (error) {\r\n      res.statusCode = 400;\r\n      res.end(JSON.stringify({ error: "JSON inv\xe1lido" }));\r\n    }\r\n  });\r\n}\r\n\r\nconst PORT = 3000;\r\nserver.listen(PORT, () => {\r\n  console.log(`API REST ejecut\xe1ndose en http://localhost:${PORT}`);\r\n});\n'})}),"\n",(0,o.jsx)(r.h2,{id:"mejores-pr\xe1cticas-y-consideraciones",children:"Mejores Pr\xe1cticas y Consideraciones"}),"\n",(0,o.jsx)(r.h3,{id:"1-validaci\xf3n-de-rutas",children:"1. Validaci\xf3n de Rutas"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'import path from "path";\r\n\r\nfunction validarRutaSegura(rutaSolicitada, directorioBase) {\r\n  // Prevenir directory traversal attacks\r\n  const rutaResuelta = path.resolve(directorioBase, rutaSolicitada);\r\n  return rutaResuelta.startsWith(directorioBase);\r\n}\r\n\r\n// Ejemplo de uso\r\nconst directorioPublico = path.join(__dirname, "public");\r\nconst rutaUsuario = "../archivo-secreto.txt";\r\n\r\nif (validarRutaSegura(rutaUsuario, directorioPublico)) {\r\n  console.log("Ruta segura");\r\n} else {\r\n  console.log("Intento de acceso no autorizado detectado");\r\n}\n'})}),"\n",(0,o.jsx)(r.h3,{id:"2-configuraci\xf3n-de-mime-types",children:"2. Configuraci\xf3n de MIME Types"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'const tiposMIME = {\r\n  ".html": "text/html",\r\n  ".css": "text/css",\r\n  ".js": "application/javascript",\r\n  ".json": "application/json",\r\n  ".png": "image/png",\r\n  ".jpg": "image/jpeg",\r\n  ".gif": "image/gif",\r\n  ".svg": "image/svg+xml",\r\n  ".ico": "image/x-icon",\r\n};\r\n\r\nfunction obtenerTipoMIME(archivo) {\r\n  const extension = path.extname(archivo).toLowerCase();\r\n  return tiposMIME[extension] || "application/octet-stream";\r\n}\n'})}),"\n",(0,o.jsx)(r.h3,{id:"3-manejo-de-errores-centralizado",children:"3. Manejo de Errores Centralizado"}),"\n",(0,o.jsx)(r.pre,{children:(0,o.jsx)(r.code,{className:"language-javascript",children:'class ManejadorErrores {\r\n  static notFound(res, mensaje = "Recurso no encontrado") {\r\n    res.statusCode = 404;\r\n    res.end(JSON.stringify({ error: mensaje }));\r\n  }\r\n\r\n  static serverError(res, error) {\r\n    console.error("Error del servidor:", error);\r\n    res.statusCode = 500;\r\n    res.end(JSON.stringify({ error: "Error interno del servidor" }));\r\n  }\r\n\r\n  static badRequest(res, mensaje = "Solicitud inv\xe1lida") {\r\n    res.statusCode = 400;\r\n    res.end(JSON.stringify({ error: mensaje }));\r\n  }\r\n}\n'})}),"\n",(0,o.jsx)(r.h2,{id:"conclusi\xf3n",children:"Conclusi\xf3n"}),"\n",(0,o.jsxs)(r.p,{children:["Node.js proporciona herramientas robustas para el manejo de rutas a trav\xe9s de sus m\xf3dulos nativos ",(0,o.jsx)(r.code,{children:"path"})," y ",(0,o.jsx)(r.code,{children:"url"}),". Con ES Modules, el enfoque ha evolucionado pero mantiene la misma funcionalidad poderosa. La clave est\xe1 en:"]}),"\n",(0,o.jsxs)(r.ul,{children:["\n",(0,o.jsxs)(r.li,{children:[(0,o.jsx)(r.strong,{children:"Entender la diferencia"})," entre CommonJS y ES Modules para ",(0,o.jsx)(r.code,{children:"__dirname"})," y ",(0,o.jsx)(r.code,{children:"__filename"})]}),"\n",(0,o.jsxs)(r.li,{children:["Usar ",(0,o.jsx)(r.code,{children:"path.join()"})," y ",(0,o.jsx)(r.code,{children:"path.resolve()"})," para construir rutas de manera segura"]}),"\n",(0,o.jsxs)(r.li,{children:["Utilizar la clase ",(0,o.jsx)(r.code,{children:"URL"})," para parsear y manipular URLs"]}),"\n",(0,o.jsx)(r.li,{children:"Implementar validaci\xf3n de seguridad para prevenir ataques de directory traversal"}),"\n",(0,o.jsx)(r.li,{children:"Crear sistemas de enrutamiento modulares y mantenibles"}),"\n",(0,o.jsx)(r.li,{children:"Manejar adecuadamente los errores y tipos MIME"}),"\n"]}),"\n",(0,o.jsx)(r.p,{children:"Este enfoque nativo es fundamental para entender c\xf3mo funcionan los frameworks web en Node.js y proporciona una base s\xf3lida para construir aplicaciones web robustas y seguras."})]})}function u(e={}){const{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,o.jsx)(r,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>t});var a=n(6540);const o={},s=a.createContext(o);function i(e){const r=a.useContext(s);return a.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function t(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),a.createElement(s.Provider,{value:r},e.children)}}}]);