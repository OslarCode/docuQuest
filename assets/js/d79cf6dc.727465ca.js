"use strict";(globalThis.webpackChunkDocuQuest_oslar_code=globalThis.webpackChunkDocuQuest_oslar_code||[]).push([[2151],{1564:(r,e,o)=>{o.r(e),o.d(e,{assets:()=>t,contentTitle:()=>c,default:()=>m,frontMatter:()=>s,metadata:()=>n,toc:()=>l});const n=JSON.parse('{"id":"backend/Node.js/manejoDeArchivos","title":"Manejo del sistema de archivos con Node.js ES Modules","description":"Node.js proporciona capacidades completas para interactuar con el sistema de archivos a trav\xe9s del m\xf3dulo fs (file system). Este m\xf3dulo permite realizar operaciones como lectura, escritura, modificaci\xf3n y eliminaci\xf3n de archivos y directorios.","source":"@site/docs/backend/Node.js/manejoDeArchivos.md","sourceDirName":"backend/Node.js","slug":"/backend/Node.js/manejoDeArchivos","permalink":"/docuQuest/docs/backend/Node.js/manejoDeArchivos","draft":false,"unlisted":false,"editUrl":"https://github.com/OslarCode/OslarCode/docs/backend/Node.js/manejoDeArchivos.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Gu\xeda de Manejo de Rutas en Node.js con ES Modules","permalink":"/docuQuest/docs/backend/Node.js/manejoDeRutas"},"next":{"title":"Manejo de procesos del sistema en Node.js ES Modules","permalink":"/docuQuest/docs/backend/Node.js/manejoDeProcesos"}}');var a=o(4848),i=o(8453);const s={},c="Manejo del sistema de archivos con Node.js ES Modules",t={},l=[{value:"Configuraci\xf3n Inicial para ES Modules",id:"configuraci\xf3n-inicial-para-es-modules",level:2},{value:"Importaci\xf3n del M\xf3dulo fs",id:"importaci\xf3n-del-m\xf3dulo-fs",level:2},{value:"Operaciones B\xe1sicas con Archivos",id:"operaciones-b\xe1sicas-con-archivos",level:2},{value:"Lectura de Archivos de Texto",id:"lectura-de-archivos-de-texto",level:3},{value:"Lectura de Archivos Binarios",id:"lectura-de-archivos-binarios",level:3},{value:"Escritura de Archivos",id:"escritura-de-archivos",level:3},{value:"A\xf1adir Contenido a un Archivo Existente",id:"a\xf1adir-contenido-a-un-archivo-existente",level:3},{value:"Verificaci\xf3n y Informaci\xf3n de Archivos",id:"verificaci\xf3n-y-informaci\xf3n-de-archivos",level:2},{value:"Verificar Existencia de Archivos",id:"verificar-existencia-de-archivos",level:3},{value:"Obtener Informaci\xf3n Detallada de Archivos",id:"obtener-informaci\xf3n-detallada-de-archivos",level:3},{value:"Operaciones con Directorios",id:"operaciones-con-directorios",level:2},{value:"Creaci\xf3n de Directorios",id:"creaci\xf3n-de-directorios",level:3},{value:"Listar Contenido de Directorios",id:"listar-contenido-de-directorios",level:3},{value:"Eliminaci\xf3n de Archivos y Directorios",id:"eliminaci\xf3n-de-archivos-y-directorios",level:3},{value:"Trabajo con Rutas usando el M\xf3dulo Path",id:"trabajo-con-rutas-usando-el-m\xf3dulo-path",level:2},{value:"Operaciones de Copia y Movimiento",id:"operaciones-de-copia-y-movimiento",level:2},{value:"Copiar Archivos",id:"copiar-archivos",level:3},{value:"Renombrar y Mover Archivos",id:"renombrar-y-mover-archivos",level:3},{value:"Manejo de Archivos Grandes con Streams",id:"manejo-de-archivos-grandes-con-streams",level:2},{value:"Lectura con Streams",id:"lectura-con-streams",level:3},{value:"Escritura con Streams",id:"escritura-con-streams",level:3},{value:"Ejemplo Pr\xe1ctico: Procesador de Archivos de Texto",id:"ejemplo-pr\xe1ctico-procesador-de-archivos-de-texto",level:2},{value:"Manejo de Permisos y Atributos",id:"manejo-de-permisos-y-atributos",level:2},{value:"Conclusi\xf3n",id:"conclusi\xf3n",level:2}];function d(r){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...r.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e.header,{children:(0,a.jsx)(e.h1,{id:"manejo-del-sistema-de-archivos-con-nodejs-es-modules",children:"Manejo del sistema de archivos con Node.js ES Modules"})}),"\n",(0,a.jsxs)(e.p,{children:["Node.js proporciona capacidades completas para interactuar con el sistema de archivos a trav\xe9s del m\xf3dulo ",(0,a.jsx)(e.code,{children:"fs"})," (file system). Este m\xf3dulo permite realizar operaciones como lectura, escritura, modificaci\xf3n y eliminaci\xf3n de archivos y directorios."]}),"\n",(0,a.jsx)(e.h2,{id:"configuraci\xf3n-inicial-para-es-modules",children:"Configuraci\xf3n Inicial para ES Modules"}),"\n",(0,a.jsx)(e.p,{children:"Para utilizar ES Modules en Node.js, es necesario configurar el proyecto adecuadamente:"}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.strong,{children:"package.json"})}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\r\n  "type": "module",\r\n  "name": "proyecto-fs",\r\n  "version": "1.0.0"\r\n}\n'})}),"\n",(0,a.jsx)(e.h2,{id:"importaci\xf3n-del-m\xf3dulo-fs",children:"Importaci\xf3n del M\xf3dulo fs"}),"\n",(0,a.jsx)(e.p,{children:"El m\xf3dulo fs ofrece dos APIs: la basada en callbacks y la basada en promesas. Para ES Modules, utilizaremos la versi\xf3n de promesas:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'// Importar la versi\xf3n basada en promesas de fs\r\nimport fs from "fs/promises";\n'})}),"\n",(0,a.jsx)(e.h2,{id:"operaciones-b\xe1sicas-con-archivos",children:"Operaciones B\xe1sicas con Archivos"}),"\n",(0,a.jsx)(e.h3,{id:"lectura-de-archivos-de-texto",children:"Lectura de Archivos de Texto"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function leerArchivoTexto() {\r\n  try {\r\n    // Leer un archivo de texto con codificaci\xf3n UTF-8\r\n    const contenido = await fs.readFile("./documento.txt", "utf8");\r\n    console.log("Contenido del archivo:");\r\n    console.log(contenido);\r\n  } catch (error) {\r\n    console.error("Error al leer el archivo:", error.message);\r\n  }\r\n}\r\n\r\nleerArchivoTexto();\n'})}),"\n",(0,a.jsxs)(e.p,{children:["El segundo par\xe1metro ",(0,a.jsx)(e.code,{children:"'utf8'"})," especifica la codificaci\xf3n del archivo. Si se omite, se obtiene un objeto Buffer con los datos binarios."]}),"\n",(0,a.jsx)(e.h3,{id:"lectura-de-archivos-binarios",children:"Lectura de Archivos Binarios"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function leerArchivoBinario() {\r\n  try {\r\n    // Leer archivo sin especificar codificaci\xf3n (devuelve Buffer)\r\n    const buffer = await fs.readFile("./imagen.jpg");\r\n    console.log("Tama\xf1o del archivo:", buffer.length, "bytes");\r\n    console.log("Primeros bytes:", buffer.slice(0, 10));\r\n  } catch (error) {\r\n    console.error("Error al leer el archivo binario:", error.message);\r\n  }\r\n}\r\n\r\nleerArchivoBinario();\n'})}),"\n",(0,a.jsx)(e.h3,{id:"escritura-de-archivos",children:"Escritura de Archivos"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function crearArchivo() {\r\n  try {\r\n    // Escribir contenido en un nuevo archivo\r\n    const contenido = "Este es el contenido del archivo creado con Node.js";\r\n    await fs.writeFile("./nuevo-archivo.txt", contenido);\r\n    console.log("Archivo creado exitosamente");\r\n  } catch (error) {\r\n    console.error("Error al crear el archivo:", error.message);\r\n  }\r\n}\r\n\r\ncrearArchivo();\n'})}),"\n",(0,a.jsx)(e.p,{children:"Si el archivo ya existe, ser\xe1 sobrescrito completamente."}),"\n",(0,a.jsx)(e.h3,{id:"a\xf1adir-contenido-a-un-archivo-existente",children:"A\xf1adir Contenido a un Archivo Existente"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function a\xf1adirLinea() {\r\n  try {\r\n    // A\xf1adir contenido al final del archivo sin borrar el existente\r\n    const nuevaLinea = "\\\\nEsta l\xednea se a\xf1adi\xf3 despu\xe9s";\r\n    await fs.appendFile("./nuevo-archivo.txt", nuevaLinea);\r\n    console.log("L\xednea a\xf1adida al archivo");\r\n  } catch (error) {\r\n    console.error("Error al a\xf1adir contenido:", error.message);\r\n  }\r\n}\r\n\r\na\xf1adirLinea();\n'})}),"\n",(0,a.jsx)(e.p,{children:"Este m\xe9todo es ideal para archivos de log o registros donde se necesita preservar el contenido anterior."}),"\n",(0,a.jsx)(e.h2,{id:"verificaci\xf3n-y-informaci\xf3n-de-archivos",children:"Verificaci\xf3n y Informaci\xf3n de Archivos"}),"\n",(0,a.jsx)(e.h3,{id:"verificar-existencia-de-archivos",children:"Verificar Existencia de Archivos"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function verificarArchivo(ruta) {\r\n  try {\r\n    // Verificar si se puede acceder al archivo\r\n    await fs.access(ruta);\r\n    console.log(`El archivo ${ruta} existe y es accesible`);\r\n    return true;\r\n  } catch (error) {\r\n    console.log(`El archivo ${ruta} no existe o no es accesible`);\r\n    return false;\r\n  }\r\n}\r\n\r\nverificarArchivo("./archivo-inexistente.txt");\n'})}),"\n",(0,a.jsx)(e.h3,{id:"obtener-informaci\xf3n-detallada-de-archivos",children:"Obtener Informaci\xf3n Detallada de Archivos"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function obtenerInfoArchivo(ruta) {\r\n  try {\r\n    // Obtener estad\xedsticas del archivo\r\n    const stats = await fs.stat(ruta);\r\n\r\n    console.log(`Informaci\xf3n del archivo: ${ruta}`);\r\n    console.log("Es archivo:", stats.isFile());\r\n    console.log("Es directorio:", stats.isDirectory());\r\n    console.log("Tama\xf1o:", stats.size, "bytes");\r\n    console.log("Creado:", stats.birthtime.toLocaleString());\r\n    console.log("\xdaltima modificaci\xf3n:", stats.mtime.toLocaleString());\r\n    console.log("\xdaltimo acceso:", stats.atime.toLocaleString());\r\n    console.log("Permisos:", stats.mode.toString(8));\r\n\r\n    return stats;\r\n  } catch (error) {\r\n    console.error("Error al obtener informaci\xf3n:", error.message);\r\n    return null;\r\n  }\r\n}\r\n\r\nobtenerInfoArchivo("./documento.txt");\n'})}),"\n",(0,a.jsx)(e.h2,{id:"operaciones-con-directorios",children:"Operaciones con Directorios"}),"\n",(0,a.jsx)(e.h3,{id:"creaci\xf3n-de-directorios",children:"Creaci\xf3n de Directorios"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function crearDirectorios() {\r\n  try {\r\n    // Crear un directorio simple\r\n    await fs.mkdir("./mi-directorio");\r\n    console.log("Directorio creado: ./mi-directorio");\r\n\r\n    // Crear directorios anidados (crea todos los directorios padres necesarios)\r\n    await fs.mkdir("./carpeta-padre/carpeta-hija/subcarpeta", {\r\n      recursive: true,\r\n    });\r\n    console.log("Directorios anidados creados exitosamente");\r\n  } catch (error) {\r\n    console.error("Error al crear directorios:", error.message);\r\n  }\r\n}\r\n\r\ncrearDirectorios();\n'})}),"\n",(0,a.jsx)(e.h3,{id:"listar-contenido-de-directorios",children:"Listar Contenido de Directorios"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function listarDirectorio(ruta = "./") {\r\n  try {\r\n    // Leer todos los elementos del directorio\r\n    const elementos = await fs.readdir(ruta, {\r\n      withFileTypes: true, // Incluir informaci\xf3n del tipo\r\n    });\r\n\r\n    console.log(`Contenido de ${ruta}:`);\r\n\r\n    for (const elemento of elementos) {\r\n      const tipo = elemento.isDirectory()\r\n        ? "\ud83d\udcc1"\r\n        : elemento.isFile()\r\n        ? "\ud83d\udcc4"\r\n        : elemento.isSymbolicLink()\r\n        ? "\ud83d\udd17"\r\n        : "?";\r\n\r\n      console.log(`${tipo} ${elemento.name}`);\r\n    }\r\n\r\n    return elementos;\r\n  } catch (error) {\r\n    console.error("Error al listar directorio:", error.message);\r\n    return [];\r\n  }\r\n}\r\n\r\nlistarDirectorio("./");\n'})}),"\n",(0,a.jsx)(e.h3,{id:"eliminaci\xf3n-de-archivos-y-directorios",children:"Eliminaci\xf3n de Archivos y Directorios"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function limpiarArchivos() {\r\n  try {\r\n    // Eliminar un archivo\r\n    await fs.unlink("./archivo-temporal.txt");\r\n    console.log("Archivo eliminado");\r\n\r\n    // Eliminar directorio vac\xedo\r\n    await fs.rmdir("./directorio-vacio");\r\n    console.log("Directorio vac\xedo eliminado");\r\n\r\n    // Eliminar directorio y todo su contenido (recursivo)\r\n    await fs.rm("./directorio-con-contenido", {\r\n      recursive: true,\r\n      force: true,\r\n    });\r\n    console.log("Directorio y contenido eliminados");\r\n  } catch (error) {\r\n    console.error("Error en operaciones de limpieza:", error.message);\r\n  }\r\n}\r\n\r\n// limpiarArchivos(); // Usar con precauci\xf3n\n'})}),"\n",(0,a.jsx)(e.h2,{id:"trabajo-con-rutas-usando-el-m\xf3dulo-path",children:"Trabajo con Rutas usando el M\xf3dulo Path"}),"\n",(0,a.jsxs)(e.p,{children:["El m\xf3dulo ",(0,a.jsx)(e.code,{children:"path"})," es esencial para trabajar con rutas de manera segura y multiplataforma."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import path from "path";\r\nimport { fileURLToPath } from "url";\r\n\r\n// En ES Modules, necesitamos obtener __dirname manualmente\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = path.dirname(__filename);\r\n\r\nfunction demostracionPath() {\r\n  const rutaEjemplo = "/usuarios/proyecto/src/archivo.js";\r\n\r\n  console.log("=== DEMOSTRACI\xd3N M\xd3DULO PATH ===");\r\n  console.log("Directorio actual del script:", __dirname);\r\n  console.log("Archivo actual del script:", __filename);\r\n\r\n  // Unir rutas de forma segura\r\n  const rutaCompleta = path.join(__dirname, "archivos", "documento.txt");\r\n  console.log("Ruta unida:", rutaCompleta);\r\n\r\n  // Resolver rutas absolutas\r\n  const rutaAbsoluta = path.resolve("src", "components", "App.jsx");\r\n  console.log("Ruta absoluta:", rutaAbsoluta);\r\n\r\n  // Obtener diferentes partes de una ruta\r\n  console.log("Nombre del archivo:", path.basename(rutaEjemplo));\r\n  console.log("Nombre sin extensi\xf3n:", path.basename(rutaEjemplo, ".js"));\r\n  console.log("Directorio padre:", path.dirname(rutaEjemplo));\r\n  console.log("Extensi\xf3n:", path.extname(rutaEjemplo));\r\n\r\n  // Parsear una ruta en sus componentes\r\n  const partes = path.parse(rutaEjemplo);\r\n  console.log("Partes de la ruta:", partes);\r\n}\r\n\r\ndemostracionPath();\n'})}),"\n",(0,a.jsx)(e.h2,{id:"operaciones-de-copia-y-movimiento",children:"Operaciones de Copia y Movimiento"}),"\n",(0,a.jsx)(e.h3,{id:"copiar-archivos",children:"Copiar Archivos"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function copiarArchivo(origen, destino) {\r\n  try {\r\n    // Copiar archivo\r\n    await fs.copyFile(origen, destino);\r\n    console.log(`Archivo copiado de ${origen} a ${destino}`);\r\n  } catch (error) {\r\n    console.error("Error al copiar archivo:", error.message);\r\n  }\r\n}\r\n\r\ncopiarArchivo("./original.txt", "./copia.txt");\n'})}),"\n",(0,a.jsx)(e.h3,{id:"renombrar-y-mover-archivos",children:"Renombrar y Mover Archivos"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function renombrarArchivo() {\r\n  try {\r\n    // Renombrar un archivo (tambi\xe9n puede moverlo entre directorios)\r\n    await fs.rename("./viejo-nombre.txt", "./nuevo-nombre.txt");\r\n    console.log("Archivo renombrado exitosamente");\r\n\r\n    // Mover archivo a otro directorio\r\n    await fs.rename("./archivo.txt", "./backups/archivo.txt");\r\n    console.log("Archivo movido a directorio backups");\r\n  } catch (error) {\r\n    console.error("Error al renombrar/mover archivo:", error.message);\r\n  }\r\n}\r\n\r\nrenombrarArchivo();\n'})}),"\n",(0,a.jsx)(e.h2,{id:"manejo-de-archivos-grandes-con-streams",children:"Manejo de Archivos Grandes con Streams"}),"\n",(0,a.jsx)(e.p,{children:"Para archivos de gran tama\xf1o, es m\xe1s eficiente usar streams en lugar de leer todo el contenido en memoria."}),"\n",(0,a.jsx)(e.h3,{id:"lectura-con-streams",children:"Lectura con Streams"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs";\r\nimport { once } from "events";\r\n\r\nasync function leerArchivoGrande(rutaArchivo) {\r\n  // Crear stream de lectura\r\n  const streamLectura = fs.createReadStream(rutaArchivo, {\r\n    encoding: "utf8",\r\n    highWaterMark: 64 * 1024, // Procesar en chunks de 64KB\r\n  });\r\n\r\n  try {\r\n    let totalBytes = 0;\r\n    let numeroChunks = 0;\r\n\r\n    // Manejar eventos del stream\r\n    streamLectura.on("data", (chunk) => {\r\n      numeroChunks++;\r\n      totalBytes += chunk.length;\r\n      console.log(`Procesando chunk ${numeroChunks}: ${chunk.length} bytes`);\r\n\r\n      // Aqu\xed puedes procesar cada chunk seg\xfan tus necesidades\r\n      // Ejemplo: buscar texto, transformar datos, etc.\r\n    });\r\n\r\n    streamLectura.on("end", () => {\r\n      console.log(\r\n        `Lectura completada: ${numeroChunks} chunks, ${totalBytes} bytes total`\r\n      );\r\n    });\r\n\r\n    streamLectura.on("error", (error) => {\r\n      console.error("Error en la lectura:", error.message);\r\n    });\r\n\r\n    // Esperar a que el stream termine\r\n    await once(streamLectura, "end");\r\n  } catch (error) {\r\n    console.error("Error en lectura por stream:", error.message);\r\n  }\r\n}\r\n\r\nleerArchivoGrande("./archivo-grande.log");\n'})}),"\n",(0,a.jsx)(e.h3,{id:"escritura-con-streams",children:"Escritura con Streams"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs";\r\n\r\nasync function escribirArchivoGrande(rutaDestino, lineas) {\r\n  return new Promise((resolve, reject) => {\r\n    // Crear stream de escritura\r\n    const streamEscritura = fs.createWriteStream(rutaDestino, {\r\n      encoding: "utf8",\r\n    });\r\n\r\n    streamEscritura.on("finish", () => {\r\n      console.log("Escritura completada exitosamente");\r\n      resolve();\r\n    });\r\n\r\n    streamEscritura.on("error", (error) => {\r\n      console.error("Error en la escritura:", error.message);\r\n      reject(error);\r\n    });\r\n\r\n    // Escribir datos l\xednea por l\xednea\r\n    for (const linea of lineas) {\r\n      const puedeContinuar = streamEscritura.write(linea + "\\\\n");\r\n\r\n      // Controlar backpressure - pausar si el buffer est\xe1 lleno\r\n      if (!puedeContinuar) {\r\n        // Esperar a que el buffer se vac\xede\r\n        streamEscritura.once("drain", () => {\r\n          console.log("Buffer vaciado, continuando escritura...");\r\n        });\r\n      }\r\n    }\r\n\r\n    // Indicar que no hay m\xe1s datos por escribir\r\n    streamEscritura.end();\r\n  });\r\n}\r\n\r\n// Ejemplo de uso\r\nconst lineas = Array.from({ length: 10000 }, (_, i) => `L\xednea ${i + 1}`);\r\nescribirArchivoGrande("./archivo-grande-salida.txt", lineas);\n'})}),"\n",(0,a.jsx)(e.h2,{id:"ejemplo-pr\xe1ctico-procesador-de-archivos-de-texto",children:"Ejemplo Pr\xe1ctico: Procesador de Archivos de Texto"}),"\n",(0,a.jsx)(e.p,{children:"Vamos a crear una utilidad completa para procesar archivos de texto:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\nimport path from "path";\r\n\r\nclass ProcesadorArchivos {\r\n  constructor(directorioBase) {\r\n    this.directorioBase = directorioBase;\r\n  }\r\n\r\n  async crearEstructura() {\r\n    try {\r\n      // Crear estructura de directorios\r\n      const directorios = ["entrada", "procesados", "salida", "logs"];\r\n\r\n      for (const dir of directorios) {\r\n        await fs.mkdir(path.join(this.directorioBase, dir), {\r\n          recursive: true,\r\n        });\r\n      }\r\n\r\n      console.log("Estructura de directorios creada");\r\n    } catch (error) {\r\n      console.error("Error al crear estructura:", error.message);\r\n    }\r\n  }\r\n\r\n  async procesarArchivosTexto() {\r\n    try {\r\n      const directorioEntrada = path.join(this.directorioBase, "entrada");\r\n      const archivos = await fs.readdir(directorioEntrada);\r\n\r\n      for (const archivo of archivos) {\r\n        const rutaCompleta = path.join(directorioEntrada, archivo);\r\n        const stats = await fs.stat(rutaCompleta);\r\n\r\n        if (stats.isFile() && path.extname(archivo) === ".txt") {\r\n          await this.procesarArchivoIndividual(rutaCompleta, archivo);\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error("Error al procesar archivos:", error.message);\r\n    }\r\n  }\r\n\r\n  async procesarArchivoIndividual(rutaArchivo, nombreArchivo) {\r\n    try {\r\n      // Leer el archivo\r\n      const contenido = await fs.readFile(rutaArchivo, "utf8");\r\n\r\n      // Realizar transformaciones\r\n      const lineas = contenido.split("\\\\n");\r\n      const lineasProcesadas = lineas.map((linea, indice) => {\r\n        return `L\xednea ${indice + 1}: ${linea.trim().toUpperCase()}`;\r\n      });\r\n\r\n      const contenidoProcesado = lineasProcesadas.join("\\\\n");\r\n\r\n      // Guardar archivo procesado\r\n      const rutaSalida = path.join(\r\n        this.directorioBase,\r\n        "salida",\r\n        `procesado_${nombreArchivo}`\r\n      );\r\n\r\n      await fs.writeFile(rutaSalida, contenidoProcesado);\r\n\r\n      // Mover archivo original a procesados\r\n      const rutaProcesados = path.join(\r\n        this.directorioBase,\r\n        "procesados",\r\n        nombreArchivo\r\n      );\r\n\r\n      await fs.rename(rutaArchivo, rutaProcesados);\r\n\r\n      console.log(`Archivo ${nombreArchivo} procesado exitosamente`);\r\n    } catch (error) {\r\n      console.error(`Error al procesar ${nombreArchivo}:`, error.message);\r\n\r\n      // Registrar error en log\r\n      await this.registrarError(nombreArchivo, error.message);\r\n    }\r\n  }\r\n\r\n  async registrarError(nombreArchivo, mensajeError) {\r\n    try {\r\n      const logEntry = `[${new Date().toISOString()}] ERROR: ${nombreArchivo} - ${mensajeError}\\\\n`;\r\n      const rutaLog = path.join(this.directorioBase, "logs", "errores.log");\r\n\r\n      await fs.appendFile(rutaLog, logEntry);\r\n    } catch (error) {\r\n      console.error("Error al escribir en log:", error.message);\r\n    }\r\n  }\r\n\r\n  async generarReporte() {\r\n    try {\r\n      const directorioSalida = path.join(this.directorioBase, "salida");\r\n      const archivos = await fs.readdir(directorioSalida);\r\n\r\n      const reporte = {\r\n        fechaGeneracion: new Date().toISOString(),\r\n        totalArchivosProcesados: archivos.length,\r\n        archivos: archivos,\r\n        tama\xf1oTotal: 0,\r\n      };\r\n\r\n      // Calcular tama\xf1o total\r\n      for (const archivo of archivos) {\r\n        const stats = await fs.stat(path.join(directorioSalida, archivo));\r\n        reporte.tama\xf1oTotal += stats.size;\r\n      }\r\n\r\n      // Guardar reporte\r\n      const rutaReporte = path.join(this.directorioBase, "reporte.json");\r\n      await fs.writeFile(rutaReporte, JSON.stringify(reporte, null, 2));\r\n\r\n      console.log("Reporte generado exitosamente");\r\n      return reporte;\r\n    } catch (error) {\r\n      console.error("Error al generar reporte:", error.message);\r\n    }\r\n  }\r\n}\r\n\r\n// Uso de la clase\r\nasync function ejemploUso() {\r\n  const procesador = new ProcesadorArchivos("./mi-proyecto");\r\n\r\n  await procesador.crearEstructura();\r\n  await procesador.procesarArchivosTexto();\r\n  await procesador.generarReporte();\r\n}\r\n\r\n// ejemploUso();\n'})}),"\n",(0,a.jsx)(e.h2,{id:"manejo-de-permisos-y-atributos",children:"Manejo de Permisos y Atributos"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-jsx",children:'import fs from "fs/promises";\r\n\r\nasync function manejarPermisos() {\r\n  try {\r\n    const archivo = "./archivo-ejemplo.txt";\r\n\r\n    // Crear archivo de ejemplo\r\n    await fs.writeFile(archivo, "Contenido de ejemplo");\r\n\r\n    // Cambiar permisos (ejemplo: lectura y escritura para propietario)\r\n    await fs.chmod(archivo, 0o600);\r\n    console.log("Permisos cambiados a 600 (rw-------)");\r\n\r\n    // Cambiar propietario (solo funciona en Unix y con permisos adecuados)\r\n    // await fs.chown(archivo, 1000, 1000);\r\n\r\n    // Obtener informaci\xf3n actual de permisos\r\n    const stats = await fs.stat(archivo);\r\n    console.log("Permisos actuales:", stats.mode.toString(8));\r\n  } catch (error) {\r\n    console.error("Error en manejo de permisos:", error.message);\r\n  }\r\n}\r\n\r\nmanejarPermisos();\n'})}),"\n",(0,a.jsx)(e.h2,{id:"conclusi\xf3n",children:"Conclusi\xf3n"}),"\n",(0,a.jsxs)(e.p,{children:["El m\xf3dulo de sistema de archivos de Node.js con ES Modules proporciona una API poderosa y moderna para trabajar con archivos y directorios. Las operaciones basadas en promesas permiten un c\xf3digo m\xe1s limpio y legible usando ",(0,a.jsx)(e.code,{children:"async/await"}),"."]}),"\n",(0,a.jsx)(e.p,{children:"Los conceptos clave cubiertos incluyen:"}),"\n",(0,a.jsxs)(e.ul,{children:["\n",(0,a.jsx)(e.li,{children:"Lectura y escritura de archivos de texto y binarios"}),"\n",(0,a.jsx)(e.li,{children:"Operaciones con directorios (creaci\xf3n, listado, eliminaci\xf3n)"}),"\n",(0,a.jsxs)(e.li,{children:["Uso del m\xf3dulo ",(0,a.jsx)(e.code,{children:"path"})," para manejo seguro de rutas"]}),"\n",(0,a.jsx)(e.li,{children:"Trabajo eficiente con archivos grandes mediante streams"}),"\n",(0,a.jsx)(e.li,{children:"Operaciones avanzadas como copia, movimiento y cambio de permisos"}),"\n"]}),"\n",(0,a.jsx)(e.p,{children:"Este conocimiento forma la base para construir aplicaciones que necesitan interactuar con el sistema de archivos, como herramientas de l\xednea de comandos, procesadores de datos, servidores de archivos y sistemas de backup."})]})}function m(r={}){const{wrapper:e}={...(0,i.R)(),...r.components};return e?(0,a.jsx)(e,{...r,children:(0,a.jsx)(d,{...r})}):d(r)}},8453:(r,e,o)=>{o.d(e,{R:()=>s,x:()=>c});var n=o(6540);const a={},i=n.createContext(a);function s(r){const e=n.useContext(i);return n.useMemo(function(){return"function"==typeof r?r(e):{...e,...r}},[e,r])}function c(r){let e;return e=r.disableParentContext?"function"==typeof r.components?r.components(a):r.components||a:s(r.components),n.createElement(i.Provider,{value:e},r.children)}}}]);