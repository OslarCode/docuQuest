"use strict";(globalThis.webpackChunkDocuQuest_oslar_code=globalThis.webpackChunkDocuQuest_oslar_code||[]).push([[2070],{8453:(n,e,o)=>{o.d(e,{R:()=>s,x:()=>t});var r=o(6540);const i={},a=r.createContext(i);function s(n){const e=r.useContext(a);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:s(n.components),r.createElement(a.Provider,{value:e},n.children)}},9547:(n,e,o)=>{o.r(e),o.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>p,frontMatter:()=>s,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"backend/Node.js/servidorWeb","title":"Servidores Web con Node.js y ES Modules","description":"Introducci\xf3n","source":"@site/docs/backend/Node.js/servidorWeb.md","sourceDirName":"backend/Node.js","slug":"/backend/Node.js/servidorWeb","permalink":"/docuQuest/docs/backend/Node.js/servidorWeb","draft":false,"unlisted":false,"editUrl":"https://github.com/OslarCode/OslarCode/docs/backend/Node.js/servidorWeb.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Asincron\xeda en Node.js ES Modules","permalink":"/docuQuest/docs/backend/Node.js/asincronia"},"next":{"title":"Express.js con ES Modules","permalink":"/docuQuest/docs/backend/Node.js/expressJS"}}');var i=o(4848),a=o(8453);const s={},t="Servidores Web con Node.js y ES Modules",c={},l=[{value:"Introducci\xf3n",id:"introducci\xf3n",level:2},{value:"Configuraci\xf3n Inicial para ES Modules",id:"configuraci\xf3n-inicial-para-es-modules",level:2},{value:"Tu Primer Servidor HTTP en Node.js",id:"tu-primer-servidor-http-en-nodejs",level:2},{value:"C\xf3digo B\xe1sico del Servidor",id:"c\xf3digo-b\xe1sico-del-servidor",level:3},{value:"Probando el Servidor B\xe1sico",id:"probando-el-servidor-b\xe1sico",level:3},{value:"An\xe1lisis de lo que Ocurre",id:"an\xe1lisis-de-lo-que-ocurre",level:3},{value:"Implementaci\xf3n de Rutas B\xe1sicas",id:"implementaci\xf3n-de-rutas-b\xe1sicas",level:2},{value:"Probando las Rutas",id:"probando-las-rutas",level:3},{value:"Sirviendo HTML desde Archivos Externos",id:"sirviendo-html-desde-archivos-externos",level:2},{value:"Creando los Archivos HTML",id:"creando-los-archivos-html",level:3},{value:"Sirviendo Archivos Est\xe1ticos (CSS, JavaScript, Im\xe1genes)",id:"sirviendo-archivos-est\xe1ticos-css-javascript-im\xe1genes",level:2},{value:"Ampliando la Estructura de Archivos",id:"ampliando-la-estructura-de-archivos",level:3},{value:"Ejercicio Pr\xe1ctico Completo: Servidor con HTML, CSS, JSON y API",id:"ejercicio-pr\xe1ctico-completo-servidor-con-html-css-json-y-api",level:2},{value:"Estructura Final del Proyecto",id:"estructura-final-del-proyecto",level:3},{value:"Ejecuci\xf3n y Pruebas Finales",id:"ejecuci\xf3n-y-pruebas-finales",level:2},{value:"\xbfQu\xe9 Has Aprendido?",id:"qu\xe9-has-aprendido",level:2},{value:"Conceptos Fundamentales",id:"conceptos-fundamentales",level:3},{value:"Habilidades T\xe9cnicas",id:"habilidades-t\xe9cnicas",level:3},{value:"Buenas Pr\xe1cticas",id:"buenas-pr\xe1cticas",level:3},{value:"Conocimientos Avanzados",id:"conocimientos-avanzados",level:3},{value:"Recursos Adicionales",id:"recursos-adicionales",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"servidores-web-con-nodejs-y-es-modules",children:"Servidores Web con Node.js y ES Modules"})}),"\n",(0,i.jsx)(e.h2,{id:"introducci\xf3n",children:"Introducci\xf3n"}),"\n",(0,i.jsxs)(e.p,{children:["Antes de utilizar frameworks como Express o Nest, es fundamental comprender ",(0,i.jsx)(e.strong,{children:"c\xf3mo Node.js puede crear un servidor web b\xe1sico por s\xed mismo"})," usando el m\xf3dulo interno ",(0,i.jsx)(e.code,{children:"http"}),". Este conocimiento te ayuda a comprender conceptos esenciales que son la base de cualquier desarrollo web:"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Peticiones y respuestas HTTP"}),"\n",(0,i.jsx)(e.li,{children:"Rutas y URLs"}),"\n",(0,i.jsx)(e.li,{children:"Cabeceras HTTP"}),"\n",(0,i.jsx)(e.li,{children:"C\xf3digos de estado"}),"\n",(0,i.jsx)(e.li,{children:"Env\xedo de HTML, JSON y archivos est\xe1ticos"}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Al finalizar este m\xf3dulo, ser\xe1s capaz de implementar un servidor completo que escuche peticiones en un puerto, responda con diferentes contenidos seg\xfan la ruta solicitada, maneje errores correctamente y sirva archivos est\xe1ticos."}),"\n",(0,i.jsx)(e.h2,{id:"configuraci\xf3n-inicial-para-es-modules",children:"Configuraci\xf3n Inicial para ES Modules"}),"\n",(0,i.jsxs)(e.p,{children:["Para utilizar ES Modules en Node.js, necesitamos configurar nuestro proyecto adecuadamente. Crea un archivo ",(0,i.jsx)(e.code,{children:"package.json"})," con el siguiente contenido:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "type": "module",\n  "name": "mi-servidor-web",\n  "version": "1.0.0",\n  "description": "Servidor web con Node.js y ES Modules",\n  "main": "server.js",\n  "scripts": {\n    "start": "node server.js",\n    "dev": "node --watch server.js"\n  }\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:["La l\xednea ",(0,i.jsx)(e.code,{children:'"type": "module"'})," es crucial, ya que le indica a Node.js que use el sistema de m\xf3dulos ES6 en lugar de CommonJS."]}),"\n",(0,i.jsx)(e.h2,{id:"tu-primer-servidor-http-en-nodejs",children:"Tu Primer Servidor HTTP en Node.js"}),"\n",(0,i.jsxs)(e.p,{children:["Node.js incluye un m\xf3dulo llamado ",(0,i.jsx)(e.code,{children:"http"})," que permite crear servidores web sin necesidad de instalar dependencias externas. Vamos a crear nuestro primer servidor paso a paso."]}),"\n",(0,i.jsx)(e.h3,{id:"c\xf3digo-b\xe1sico-del-servidor",children:"C\xf3digo B\xe1sico del Servidor"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// server.js\n\n// Importamos el m\xf3dulo \'http\' que viene integrado en Node.js\n// En ES Modules usamos \'import\' en lugar de \'require\'\n// Este m\xf3dulo proporciona todas las herramientas necesarias para crear servidores HTTP\nimport http from "http";\n\n// Creamos el servidor usando http.createServer()\n// Esta funci\xf3n recibe un callback que se ejecuta por cada petici\xf3n recibida\n// El callback recibe dos par\xe1metros:\n// - req: objeto que representa la petici\xf3n del cliente\n// - res: objeto que usamos para construir la respuesta\nconst server = http.createServer((req, res) => {\n  // Escribimos la cabecera de la respuesta HTTP\n  // El c\xf3digo 200 significa "OK" - todo sali\xf3 bien\n  // El segundo par\xe1metro es un objeto con las cabeceras HTTP\n  // \'Content-Type\': \'text/plain\' indica que enviamos texto plano\n  res.writeHead(200, { "Content-Type": "text/plain" });\n\n  // Finalizamos la respuesta enviando el mensaje de texto al cliente\n  // res.end() cierra la respuesta y env\xeda los datos al cliente\n  res.end("\xa1Hola desde Node.js sin frameworks usando ES Modules!");\n});\n\n// Indicamos al servidor que escuche en el puerto 3000\n// El segundo par\xe1metro es un callback opcional que se ejecuta cuando el servidor inicia\nconst PORT = 3000;\nserver.listen(PORT, () => {\n  // Mostramos un mensaje en la consola para confirmar que el servidor est\xe1 funcionando\n  console.log("Servidor escuchando en http://localhost:" + PORT);\n  console.log("Presiona Ctrl + C para detener el servidor");\n});\n'})}),"\n",(0,i.jsx)(e.h3,{id:"probando-el-servidor-b\xe1sico",children:"Probando el Servidor B\xe1sico"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["Guarda el c\xf3digo en un archivo llamado ",(0,i.jsx)(e.code,{children:"server.js"})]}),"\n",(0,i.jsxs)(e.li,{children:["Abre tu terminal y ejecuta:","\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"node server.js\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["Abre tu navegador y visita ",(0,i.jsx)(e.code,{children:"http://localhost:3000"})]}),"\n",(0,i.jsx)(e.li,{children:'Deber\xedas ver el mensaje "\xa1Hola desde Node.js sin frameworks usando ES Modules!"'}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"an\xe1lisis-de-lo-que-ocurre",children:"An\xe1lisis de lo que Ocurre"}),"\n",(0,i.jsxs)(e.p,{children:["Cuando visitas ",(0,i.jsx)(e.code,{children:"http://localhost:3000"})," en tu navegador:"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"El navegador env\xeda una petici\xf3n HTTP GET a tu servidor"}),"\n",(0,i.jsxs)(e.li,{children:["Node.js recibe la petici\xf3n y ejecuta el callback de ",(0,i.jsx)(e.code,{children:"createServer"})]}),"\n",(0,i.jsx)(e.li,{children:"El servidor responde con c\xf3digo 200 y el texto plano"}),"\n",(0,i.jsx)(e.li,{children:"El navegador recibe la respuesta y muestra el texto"}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"implementaci\xf3n-de-rutas-b\xe1sicas",children:"Implementaci\xf3n de Rutas B\xe1sicas"}),"\n",(0,i.jsx)(e.p,{children:"Un servidor web real necesita responder diferente contenido seg\xfan la URL solicitada. Vamos a implementar un sistema de rutas b\xe1sico."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// server-con-rutas.js\n\n// Importamos el m\xf3dulo HTTP\nimport http from "http";\n\n// Creamos el servidor con un sistema de rutas\nconst server = http.createServer((req, res) => {\n  // req.url contiene la URL solicitada por el cliente\n  // req.method contiene el m\xe9todo HTTP (GET, POST, etc.)\n  console.log("Petici\xf3n recibida:", req.method, req.url);\n\n  // Si la URL es "/" y el m\xe9todo es GET, mostramos la p\xe1gina principal\n  if (req.url === "/" && req.method === "GET") {\n    // Enviamos una cabecera con estado 200 (OK) y tipo de contenido HTML\n    res.writeHead(200, { "Content-Type": "text/html" });\n\n    // Enviamos un mensaje HTML como respuesta\n    res.end(`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>P\xe1gina Principal</title>\n            </head>\n            <body>\n                <h1>Bienvenido al Servidor Node.js</h1>\n                <p>Esta es la p\xe1gina principal</p>\n                <nav>\n                    <a href="/acerca">Acerca de</a> | \n                    <a href="/api">API</a> | \n                    <a href="/contacto">Contacto</a>\n                </nav>\n            </body>\n            </html>\n        `);\n\n    // Si la URL es "/acerca" y el m\xe9todo es GET, mostramos informaci\xf3n\n  } else if (req.url === "/acerca" && req.method === "GET") {\n    res.writeHead(200, { "Content-Type": "text/html" });\n    res.end(`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>Acerca de</title>\n            </head>\n            <body>\n                <h1>Acerca de Nuestro Servidor</h1>\n                <p>Este servidor fue construido con Node.js y m\xf3dulos nativos</p>\n                <a href="/">Volver al inicio</a>\n            </body>\n            </html>\n        `);\n\n    // Si la URL es "/api" y el m\xe9todo es GET, respondemos con JSON\n  } else if (req.url === "/api" && req.method === "GET") {\n    // Cabecera con estado 200 y tipo de contenido JSON\n    res.writeHead(200, { "Content-Type": "application/json" });\n\n    // Enviamos un objeto convertido a JSON como respuesta\n    res.end(\n      JSON.stringify({\n        mensaje: "Hola desde la API",\n        timestamp: new Date().toISOString(),\n        estado: "activo",\n        version: "1.0.0",\n      })\n    );\n\n    // Si la URL es "/contacto" y el m\xe9todo es GET, mostramos formulario\n  } else if (req.url === "/contacto" && req.method === "GET") {\n    res.writeHead(200, { "Content-Type": "text/html" });\n    res.end(`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>Contacto</title>\n            </head>\n            <body>\n                <h1>P\xe1gina de Contacto</h1>\n                <form action="/contacto" method="POST">\n                    <input type="text" name="nombre" placeholder="Tu nombre">\n                    <button type="submit">Enviar</button>\n                </form>\n                <a href="/">Volver al inicio</a>\n            </body>\n            </html>\n        `);\n\n    // Si la URL es "/contacto" y el m\xe9todo es POST, procesamos el formulario\n  } else if (req.url === "/contacto" && req.method === "POST") {\n    // Por ahora, simplemente redirigimos a la p\xe1gina principal\n    res.writeHead(302, {\n      Location: "/",\n      "Content-Type": "text/plain",\n    });\n    res.end("Formulario recibido. Redirigiendo...");\n\n    // Si no coincide con ninguna ruta conocida, devolvemos un error 404\n  } else {\n    // Estado 404 (no encontrado) y tipo de contenido texto plano\n    res.writeHead(404, { "Content-Type": "text/html" });\n\n    // Mensaje de error como respuesta\n    res.end(`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>P\xe1gina No Encontrada</title>\n            </head>\n            <body>\n                <h1>404 - P\xe1gina No Encontrada</h1>\n                <p>La p\xe1gina que buscas no existe en este servidor.</p>\n                <a href="/">Volver al inicio</a>\n            </body>\n            </html>\n        `);\n  }\n});\n\n// Iniciamos el servidor para que escuche en el puerto 3000\nconst PORT = 3000;\nserver.listen(PORT, () => {\n  console.log("Servidor con rutas ejecut\xe1ndose en http://localhost:" + PORT);\n  console.log("Rutas disponibles:");\n  console.log("  GET / - P\xe1gina principal");\n  console.log("  GET /acerca - Informaci\xf3n del servidor");\n  console.log("  GET /api - Endpoint API JSON");\n  console.log("  GET /contacto - Formulario de contacto");\n  console.log("  POST /contacto - Procesar formulario");\n  console.log("  * Cualquier otra ruta - Error 404");\n});\n'})}),"\n",(0,i.jsx)(e.h3,{id:"probando-las-rutas",children:"Probando las Rutas"}),"\n",(0,i.jsx)(e.p,{children:"Despu\xe9s de ejecutar este servidor, prueba las siguientes URLs en tu navegador:"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/"})," - P\xe1gina principal con navegaci\xf3n"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/acerca"}),' - P\xe1gina "Acerca de"']}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api"})," - Respuesta JSON"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/contacto"})," - Formulario de contacto"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/ruta-inexistente"})," - Error 404 personalizado"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"sirviendo-html-desde-archivos-externos",children:"Sirviendo HTML desde Archivos Externos"}),"\n",(0,i.jsx)(e.p,{children:"Incrustar HTML en strings de JavaScript no es una pr\xe1ctica recomendada para proyectos reales. Es mejor mantener el HTML en archivos separados. Vamos a crear un servidor que lea archivos HTML del sistema de archivos."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// server-con-archivos-html.js\n\n// Importamos los m\xf3dulos necesarios\nimport http from "http";\nimport fs from "fs/promises"; // Versi\xf3n con promesas de fs\nimport path from "path";\nimport { fileURLToPath } from "url";\n\n// En ES Modules, necesitamos obtener __dirname manualmente\n// fileURLToPath convierte la URL del m\xf3dulo a una ruta de archivo\n// path.dirname extrae el directorio de la ruta del archivo\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Creamos el servidor HTTP\nconst server = http.createServer(async (req, res) => {\n  console.log("Petici\xf3n recibida:", req.method, req.url);\n\n  // Si el usuario accede a la ra\xedz ("/"), servimos el archivo index.html\n  if (req.url === "/" && req.method === "GET") {\n    try {\n      // Construimos la ruta absoluta hacia el archivo index.html\n      // path.join() crea rutas compatibles con cualquier sistema operativo\n      const rutaArchivo = path.join(__dirname, "public", "index.html");\n\n      // Leemos el archivo HTML usando fs.readFile() con await\n      // \'utf8\' especifica la codificaci\xf3n para obtener texto en lugar de Buffer\n      const contenido = await fs.readFile(rutaArchivo, "utf8");\n\n      // Si el archivo se lee correctamente, enviamos estado 200 y tipo HTML\n      res.writeHead(200, { "Content-Type": "text/html" });\n      res.end(contenido);\n    } catch (error) {\n      // Si hay un error al leer el archivo, devolvemos error 500\n      console.error("Error al leer archivo HTML:", error);\n      res.writeHead(500, { "Content-Type": "text/plain" });\n      res.end(\n        "Error interno del servidor: No se pudo cargar la p\xe1gina principal"\n      );\n    }\n\n    // Si el usuario accede a "/acerca", servimos acerca.html\n  } else if (req.url === "/acerca" && req.method === "GET") {\n    try {\n      const rutaArchivo = path.join(__dirname, "public", "acerca.html");\n      const contenido = await fs.readFile(rutaArchivo, "utf8");\n      res.writeHead(200, { "Content-Type": "text/html" });\n      res.end(contenido);\n    } catch (error) {\n      console.error("Error al leer archivo acerca.html:", error);\n      res.writeHead(500, { "Content-Type": "text/plain" });\n      res.end("Error interno del servidor");\n    }\n\n    // Para cualquier otra ruta, respondemos con 404\n  } else {\n    res.writeHead(404, { "Content-Type": "text/html" });\n    res.end(`\n            <!DOCTYPE html>\n            <html>\n            <head>\n                <title>P\xe1gina No Encontrada</title>\n            </head>\n            <body>\n                <h1>404 - P\xe1gina No Encontrada</h1>\n                <p>La p\xe1gina "${req.url}" no existe en este servidor.</p>\n                <a href="/">Volver al inicio</a>\n            </body>\n            </html>\n        `);\n  }\n});\n\n// Configuramos el puerto y ponemos el servidor a escuchar\nconst PORT = 3000;\nserver.listen(PORT, () => {\n  console.log(\n    "Servidor con archivos HTML ejecut\xe1ndose en http://localhost:" + PORT\n  );\n  console.log("Archivos servidos desde: " + path.join(__dirname, "public"));\n});\n'})}),"\n",(0,i.jsx)(e.h3,{id:"creando-los-archivos-html",children:"Creando los Archivos HTML"}),"\n",(0,i.jsxs)(e.p,{children:["Antes de ejecutar este servidor, necesitamos crear la carpeta ",(0,i.jsx)(e.code,{children:"public"})," con los archivos HTML:"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Crea la carpeta y archivos:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"mkdir public\n"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"public/index.html"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="es">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Mi Servidor Node.js</title>\n  </head>\n  <body>\n    <h1>Bienvenido a Mi Servidor</h1>\n    <p>Este contenido viene de un archivo HTML externo</p>\n    <p>El servidor est\xe1 construido con Node.js y ES Modules</p>\n\n    <nav>\n      <a href="/">Inicio</a> | <a href="/acerca">Acerca de</a> |\n      <a href="/api">API JSON</a>\n    </nav>\n\n    <section>\n      <h2>Caracter\xedsticas</h2>\n      <ul>\n        <li>Servidor HTTP nativo</li>\n        <li>Archivos HTML externos</li>\n        <li>Sistema de rutas b\xe1sico</li>\n        <li>Manejo de errores</li>\n      </ul>\n    </section>\n  </body>\n</html>\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"public/acerca.html"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="es">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Acerca de - Mi Servidor</title>\n  </head>\n  <body>\n    <h1>Acerca de Este Servidor</h1>\n\n    <p>Este servidor web fue creado como ejemplo educativo para demostrar:</p>\n\n    <ul>\n      <li>C\xf3mo crear servidores HTTP con Node.js</li>\n      <li>Uso de ES Modules en lugar de CommonJS</li>\n      <li>Lectura de archivos del sistema de archivos</li>\n      <li>Manejo b\xe1sico de rutas HTTP</li>\n      <li>Servicio de contenido est\xe1tico</li>\n    </ul>\n\n    <h2>Tecnolog\xedas Utilizadas</h2>\n    <ul>\n      <li>Node.js Runtime</li>\n      <li>M\xf3dulo HTTP nativo</li>\n      <li>M\xf3dulo File System (fs)</li>\n      <li>M\xf3dulo Path para rutas</li>\n      <li>ES Modules (import/export)</li>\n    </ul>\n\n    <a href="/">Volver a la p\xe1gina principal</a>\n  </body>\n</html>\n'})}),"\n",(0,i.jsxs)(e.p,{children:["Ahora ejecuta el servidor y visita ",(0,i.jsx)(e.code,{children:"http://localhost:3000/"})," y ",(0,i.jsx)(e.code,{children:"http://localhost:3000/acerca"})," para ver los archivos HTML siendo servidos correctamente."]}),"\n",(0,i.jsx)(e.h2,{id:"sirviendo-archivos-est\xe1ticos-css-javascript-im\xe1genes",children:"Sirviendo Archivos Est\xe1ticos (CSS, JavaScript, Im\xe1genes)"}),"\n",(0,i.jsx)(e.p,{children:"Un servidor web real necesita servir no solo HTML, sino tambi\xe9n CSS, JavaScript, im\xe1genes y otros recursos. Vamos a crear un servidor que detecte autom\xe1ticamente el tipo de archivo y sirva el contenido correcto."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// server-archivos-estaticos.js\n\nimport http from "http";\nimport fs from "fs/promises";\nimport path from "path";\nimport { fileURLToPath } from "url";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Definimos un objeto que relaciona extensiones de archivo con sus tipos MIME\n// Los tipos MIME le indican al navegador qu\xe9 tipo de contenido estamos enviando\nconst tiposMIME = {\n  ".html": "text/html",\n  ".htm": "text/html",\n  ".css": "text/css",\n  ".js": "text/javascript",\n  ".mjs": "text/javascript",\n  ".json": "application/json",\n  ".png": "image/png",\n  ".jpg": "image/jpeg",\n  ".jpeg": "image/jpeg",\n  ".gif": "image/gif",\n  ".svg": "image/svg+xml",\n  ".ico": "image/x-icon",\n  ".txt": "text/plain",\n  ".pdf": "application/pdf",\n};\n\n// Creamos el servidor HTTP\nconst server = http.createServer(async (req, res) => {\n  console.log("Petici\xf3n recibida:", req.method, req.url);\n\n  // Si la URL es "/", cargamos "/index.html" por defecto\n  // En otros casos, usamos la ruta tal cual\n  let rutaSolicitada = req.url === "/" ? "/index.html" : req.url;\n\n  // Construimos la ruta completa al archivo dentro de la carpeta \'public\'\n  const rutaArchivo = path.join(__dirname, "public", rutaSolicitada);\n\n  // Obtenemos la extensi\xf3n del archivo solicitado\n  const extension = path.extname(rutaArchivo).toLowerCase();\n\n  // Buscamos el tipo MIME en nuestro objeto\n  // Si no encuentra la extensi\xf3n, usa "text/plain" por defecto\n  const tipoContenido = tiposMIME[extension] || "text/plain";\n\n  try {\n    // Intentamos leer el archivo solicitado desde el sistema de archivos\n    // NO especificamos codificaci\xf3n para archivos binarios (im\xe1genes, etc.)\n    const contenido = await fs.readFile(rutaArchivo);\n\n    // Si el archivo se lee correctamente, enviamos c\xf3digo 200 y el tipo MIME correspondiente\n    res.writeHead(200, { "Content-Type": tipoContenido });\n\n    // Enviamos el contenido del archivo como respuesta\n    res.end(contenido);\n  } catch (error) {\n    // Si hay un error (archivo no existe), respondemos con error 404\n    if (error.code === "ENOENT") {\n      res.writeHead(404, { "Content-Type": "text/html" });\n      res.end(`\n                <!DOCTYPE html>\n                <html>\n                <head>\n                    <title>404 - Recurso No Encontrado</title>\n                    <link rel="stylesheet" href="/estilo.css">\n                </head>\n                <body>\n                    <div class="container">\n                        <h1>404 - Recurso No Encontrado</h1>\n                        <p>El archivo solicitado no existe: ${rutaSolicitada}</p>\n                        <a href="/">Volver a la p\xe1gina principal</a>\n                    </div>\n                </body>\n                </html>\n            `);\n    } else {\n      // Para otros tipos de errores (permisos, etc.), respondemos con error 500\n      console.error("Error del servidor:", error);\n      res.writeHead(500, { "Content-Type": "text/html" });\n      res.end(`\n                <!DOCTYPE html>\n                <html>\n                <head>\n                    <title>500 - Error del Servidor</title>\n                    <link rel="stylesheet" href="/estilo.css">\n                </head>\n                <body>\n                    <div class="container">\n                        <h1>500 - Error Interno del Servidor</h1>\n                        <p>Ha ocurrido un error inesperado en el servidor.</p>\n                        <a href="/">Volver a la p\xe1gina principal</a>\n                    </div>\n                </body>\n                </html>\n            `);\n    }\n  }\n});\n\nconst PORT = 3000;\nserver.listen(PORT, () => {\n  console.log(\n    "Servidor de archivos est\xe1ticos ejecut\xe1ndose en http://localhost:" + PORT\n  );\n  console.log("Sirviendo archivos desde: " + path.join(__dirname, "public"));\n  console.log(\n    "Tipos de archivo soportados: " + Object.keys(tiposMIME).join(", ")\n  );\n});\n'})}),"\n",(0,i.jsx)(e.h3,{id:"ampliando-la-estructura-de-archivos",children:"Ampliando la Estructura de Archivos"}),"\n",(0,i.jsxs)(e.p,{children:["Ahora vamos a expandir nuestra carpeta ",(0,i.jsx)(e.code,{children:"public"})," con m\xe1s tipos de archivos:"]}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"public/estilo.css"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-css",children:'/* Estilos b\xe1sicos para nuestro servidor */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\n  line-height: 1.6;\n  color: #333;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n}\n\n.container {\n  max-width: 800px;\n  margin: 0 auto;\n  padding: 40px 20px;\n}\n\nheader {\n  background: white;\n  padding: 40px;\n  border-radius: 10px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  margin-bottom: 30px;\n}\n\nh1 {\n  color: #2c3e50;\n  margin-bottom: 15px;\n  font-size: 2.5em;\n}\n\np {\n  color: #7f8c8d;\n  font-size: 1.1em;\n  margin-bottom: 20px;\n}\n\nnav {\n  display: flex;\n  justify-content: center;\n  gap: 15px;\n  margin: 30px 0;\n}\n\nnav a {\n  text-decoration: none;\n  color: #3498db;\n  padding: 12px 24px;\n  border: 2px solid #3498db;\n  border-radius: 25px;\n  transition: all 0.3s ease;\n  font-weight: 500;\n}\n\nnav a:hover {\n  background-color: #3498db;\n  color: white;\n  transform: translateY(-2px);\n}\n\nsection {\n  background: white;\n  padding: 30px;\n  border-radius: 10px;\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n}\n\nsection h2 {\n  color: #2c3e50;\n  margin-bottom: 20px;\n  border-bottom: 2px solid #ecf0f1;\n  padding-bottom: 10px;\n}\n\nul {\n  list-style: none;\n}\n\nli {\n  padding: 8px 0;\n  border-bottom: 1px solid #ecf0f1;\n}\n\nli:before {\n  content: "\u2713 ";\n  color: #27ae60;\n  font-weight: bold;\n}\n\nfooter {\n  text-align: center;\n  margin-top: 40px;\n  color: white;\n}\n\n.error {\n  text-align: center;\n  color: #e74c3c;\n}\n\n.error h1 {\n  color: #e74c3c;\n  font-size: 4em;\n  margin-bottom: 20px;\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"public/script.js"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// JavaScript del lado del cliente para nuestro servidor\ndocument.addEventListener("DOMContentLoaded", function () {\n  console.log("P\xe1gina cargada correctamente desde archivo est\xe1tico");\n\n  // A\xf1adir interactividad b\xe1sica\n  const titulo = document.querySelector("h1");\n  if (titulo) {\n    titulo.addEventListener("click", function () {\n      this.style.color =\n        this.style.color === "rgb(231, 76, 60)" ? "#2c3e50" : "#e74c3c";\n    });\n  }\n\n  // Mostrar hora actual en el footer si existe\n  const footer = document.querySelector("footer");\n  if (footer) {\n    const hora = new Date().toLocaleTimeString();\n    const elementoHora = document.createElement("p");\n    elementoHora.textContent = `P\xe1gina cargada a las: ${hora}`;\n    elementoHora.style.fontSize = "0.9em";\n    elementoHora.style.opacity = "0.8";\n    footer.appendChild(elementoHora);\n  }\n\n  // Efecto hover mejorado para enlaces de navegaci\xf3n\n  const enlacesNav = document.querySelectorAll("nav a");\n  enlacesNav.forEach((enlace) => {\n    enlace.addEventListener("mouseenter", function () {\n      this.style.transform = "translateY(-2px) scale(1.05)";\n    });\n\n    enlace.addEventListener("mouseleave", function () {\n      this.style.transform = "translateY(0) scale(1)";\n    });\n  });\n});\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Actualiza public/index.html para usar los nuevos estilos:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="es">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Mi Servidor Node.js con Archivos Est\xe1ticos</title>\n    <link rel="stylesheet" href="/estilo.css" />\n  </head>\n  <body>\n    <div class="container">\n      <header>\n        <h1>Bienvenido a Mi Servidor Node.js</h1>\n        <p>Servidor construido con m\xf3dulos nativos y ES Modules</p>\n      </header>\n\n      <nav>\n        <a href="/">Inicio</a>\n        <a href="/acerca.html">Acerca de</a>\n        <a href="/api.json">Ejemplo JSON</a>\n        <a href="/ruta-inexistente">Error 404</a>\n      </nav>\n\n      <section>\n        <h2>Caracter\xedsticas del Servidor</h2>\n        <ul>\n          <li>Servidor HTTP nativo de Node.js</li>\n          <li>Sistema de archivos est\xe1ticos completo</li>\n          <li>Detecci\xf3n autom\xe1tica de tipos MIME</li>\n          <li>Manejo de errores 404 y 500</li>\n          <li>Estilos CSS y JavaScript del lado cliente</li>\n          <li>Compatibilidad con m\xfaltiples tipos de archivo</li>\n        </ul>\n      </section>\n\n      <section>\n        <h2>Tecnolog\xedas Implementadas</h2>\n        <ul>\n          <li>M\xf3dulo HTTP para el servidor web</li>\n          <li>M\xf3dulo FS para lectura de archivos</li>\n          <li>M\xf3dulo Path para manejo de rutas</li>\n          <li>ES Modules (import/export)</li>\n          <li>Async/Await para operaciones as\xedncronas</li>\n          <li>Promesas para manejo de errores</li>\n        </ul>\n      </section>\n\n      <footer>\n        <p>Servidor ejecut\xe1ndose en Node.js con ES Modules</p>\n      </footer>\n    </div>\n\n    <script src="/script.js"><\/script>\n  </body>\n</html>\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Crea tambi\xe9n public/api.json para probar JSON:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "servidor": "Node.js con ES Modules",\n  "version": "1.0.0",\n  "estado": "activo",\n  "timestamp": "2024-01-01T12:00:00.000Z",\n  "caracteristicas": [\n    "Servicio de archivos est\xe1ticos",\n    "Manejo de tipos MIME",\n    "Sistema de rutas",\n    "Manejo de errores HTTP"\n  ],\n  "estadisticas": {\n    "archivos_servidos": 0,\n    "uptime": "0 segundos",\n    "memoria_uso": "0 MB"\n  }\n}\n'})}),"\n",(0,i.jsx)(e.h2,{id:"ejercicio-pr\xe1ctico-completo-servidor-con-html-css-json-y-api",children:"Ejercicio Pr\xe1ctico Completo: Servidor con HTML, CSS, JSON y API"}),"\n",(0,i.jsx)(e.p,{children:"Vamos a crear un servidor completo que combine todo lo aprendido:"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// servidor-completo.js\n\nimport http from "http";\nimport fs from "fs/promises";\nimport path from "path";\nimport { fileURLToPath } from "url";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\n// Configuraci\xf3n de tipos MIME\nconst tiposMIME = {\n  ".html": "text/html",\n  ".css": "text/css",\n  ".js": "text/javascript",\n  ".json": "application/json",\n  ".png": "image/png",\n  ".jpg": "image/jpeg",\n  ".svg": "image/svg+xml",\n  ".ico": "image/x-icon",\n};\n\n// Datos de ejemplo para nuestra API\nconst usuarios = [\n  { id: 1, nombre: "Ana Garc\xeda", email: "ana@ejemplo.com", activo: true },\n  { id: 2, nombre: "Carlos L\xf3pez", email: "carlos@ejemplo.com", activo: true },\n  {\n    id: 3,\n    nombre: "Mar\xeda Rodr\xedguez",\n    email: "maria@ejemplo.com",\n    activo: false,\n  },\n];\n\nconst productos = [\n  { id: 1, nombre: "Laptop", precio: 999.99, categoria: "tecnologia" },\n  { id: 2, nombre: "Mouse", precio: 29.99, categoria: "tecnologia" },\n  { id: 3, nombre: "Libro", precio: 19.99, categoria: "educacion" },\n];\n\nclass ServidorWebCompleto {\n  constructor() {\n    this.contadorPeticiones = 0;\n    this.server = http.createServer(this.manejarPeticion.bind(this));\n  }\n\n  async manejarPeticion(req, res) {\n    this.contadorPeticiones++;\n    const url = new URL(req.url, `http://${req.headers.host}`);\n    const ruta = url.pathname;\n\n    console.log(\n      `[${new Date().toISOString()}] Petici\xf3n ${this.contadorPeticiones}: ${\n        req.method\n      } ${ruta}`\n    );\n\n    try {\n      // Ruta principal - p\xe1gina de inicio\n      if (ruta === "/" && req.method === "GET") {\n        await this.servirPaginaInicio(res);\n\n        // Rutas de API\n      } else if (ruta === "/api/usuarios" && req.method === "GET") {\n        await this.obtenerUsuarios(res, url);\n      } else if (ruta.startsWith("/api/usuarios/") && req.method === "GET") {\n        await this.obtenerUsuarioPorId(res, ruta);\n      } else if (ruta === "/api/productos" && req.method === "GET") {\n        await this.obtenerProductos(res, url);\n      } else if (ruta === "/api/estadisticas" && req.method === "GET") {\n        await this.obtenerEstadisticas(res);\n\n        // Rutas de p\xe1ginas\n      } else if (ruta === "/acerca" && req.method === "GET") {\n        await this.servirPaginaAcerca(res);\n      } else if (ruta === "/contacto" && req.method === "GET") {\n        await this.servirPaginaContacto(res);\n\n        // Servir archivos est\xe1ticos\n      } else {\n        await this.servirArchivoEstatico(res, ruta);\n      }\n    } catch (error) {\n      await this.manejarError(res, error, ruta);\n    }\n  }\n\n  async servirPaginaInicio(res) {\n    const contenido = await this.leerPlantilla("index.html");\n    const html = contenido\n      .replace("{{titulo}}", "Inicio - Servidor Completo")\n      .replace(\n        "{{contenido}}",\n        `\n                <section>\n                    <h2>Bienvenido al Servidor Web Completo</h2>\n                    <p>Este servidor demuestra todas las funcionalidades aprendidas:</p>\n                    <ul>\n                        <li><strong>Servicio de archivos est\xe1ticos</strong> - HTML, CSS, JS, im\xe1genes</li>\n                        <li><strong>API REST</strong> - Endpoints para usuarios y productos</li>\n                        <li><strong>Sistema de rutas avanzado</strong> - Con par\xe1metros y queries</li>\n                        <li><strong>Manejo de errores</strong> - P\xe1ginas de error personalizadas</li>\n                        <li><strong>Plantillas HTML</strong> - Contenido din\xe1mico b\xe1sico</li>\n                    </ul>\n                </section>\n                \n                <section>\n                    <h2>Endpoints de API Disponibles</h2>\n                    <div class="endpoints">\n                        <div class="endpoint">\n                            <code>GET /api/usuarios</code>\n                            <p>Lista todos los usuarios</p>\n                        </div>\n                        <div class="endpoint">\n                            <code>GET /api/usuarios/:id</code>\n                            <p>Obtiene un usuario espec\xedfico</p>\n                        </div>\n                        <div class="endpoint">\n                            <code>GET /api/productos</code>\n                            <p>Lista todos los productos</p>\n                        </div>\n                        <div class="endpoint">\n                            <code>GET /api/estadisticas</code>\n                            <p>Estad\xedsticas del servidor</p>\n                        </div>\n                    </div>\n                </section>\n            `\n      );\n\n    res.writeHead(200, { "Content-Type": "text/html" });\n    res.end(html);\n  }\n\n  async servirPaginaAcerca(res) {\n    const contenido = await this.leerPlantilla("index.html");\n    const html = contenido\n      .replace("{{titulo}}", "Acerca de - Servidor Completo")\n      .replace(\n        "{{contenido}}",\n        `\n                <section>\n                    <h2>Acerca de Este Servidor</h2>\n                    <p>Este es un servidor web educativo construido con Node.js y m\xf3dulos nativos.</p>\n                    \n                    <h3>Tecnolog\xedas Utilizadas</h3>\n                    <ul>\n                        <li><strong>Node.js</strong> - Runtime de JavaScript</li>\n                        <li><strong>M\xf3dulo HTTP</strong> - Servidor web nativo</li>\n                        <li><strong>M\xf3dulo FS</strong> - Sistema de archivos</li>\n                        <li><strong>M\xf3dulo Path</strong> - Manejo de rutas</li>\n                        <li><strong>ES Modules</strong> - Sistema de m\xf3dulos moderno</li>\n                    </ul>\n                    \n                    <h3>Caracter\xedsticas Implementadas</h3>\n                    <ul>\n                        <li>Servicio de archivos est\xe1ticos con detecci\xf3n MIME</li>\n                        <li>API REST con m\xfaltiples endpoints</li>\n                        <li>Sistema de plantillas b\xe1sico</li>\n                        <li>Manejo de par\xe1metros de consulta</li>\n                        <li>Estad\xedsticas en tiempo real</li>\n                        <li>P\xe1ginas de error personalizadas</li>\n                    </ul>\n                </section>\n            `\n      );\n\n    res.writeHead(200, { "Content-Type": "text/html" });\n    res.end(html);\n  }\n\n  async servirPaginaContacto(res) {\n    const contenido = await this.leerPlantilla("index.html");\n    const html = contenido\n      .replace("{{titulo}}", "Contacto - Servidor Completo")\n      .replace(\n        "{{contenido}}",\n        `\n                <section>\n                    <h2>Contacto</h2>\n                    <p>Esta es una p\xe1gina de contacto de ejemplo.</p>\n                    \n                    <form action="/contacto" method="POST" style="max-width: 500px;">\n                        <div style="margin-bottom: 15px;">\n                            <label for="nombre" style="display: block; margin-bottom: 5px;">Nombre:</label>\n                            <input type="text" id="nombre" name="nombre" required \n                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">\n                        </div>\n                        \n                        <div style="margin-bottom: 15px;">\n                            <label for="email" style="display: block; margin-bottom: 5px;">Email:</label>\n                            <input type="email" id="email" name="email" required \n                                   style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;">\n                        </div>\n                        \n                        <div style="margin-bottom: 15px;">\n                            <label for="mensaje" style="display: block; margin-bottom: 5px;">Mensaje:</label>\n                            <textarea id="mensaje" name="mensaje" rows="4" required \n                                      style="width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;"></textarea>\n                        </div>\n                        \n                        <button type="submit" \n                                style="background: #3498db; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer;">\n                            Enviar Mensaje\n                        </button>\n                    </form>\n                </section>\n            `\n      );\n\n    res.writeHead(200, { "Content-Type": "text/html" });\n    res.end(html);\n  }\n\n  async obtenerUsuarios(res, url) {\n    const params = url.searchParams;\n    const soloActivos = params.get("activos") === "true";\n\n    let usuariosFiltrados = usuarios;\n    if (soloActivos) {\n      usuariosFiltrados = usuarios.filter((user) => user.activo);\n    }\n\n    res.writeHead(200, { "Content-Type": "application/json" });\n    res.end(\n      JSON.stringify({\n        success: true,\n        data: usuariosFiltrados,\n        total: usuariosFiltrados.length,\n        filtros: {\n          activos: soloActivos,\n        },\n      })\n    );\n  }\n\n  async obtenerUsuarioPorId(res, ruta) {\n    const id = parseInt(ruta.split("/").pop());\n\n    if (isNaN(id)) {\n      res.writeHead(400, { "Content-Type": "application/json" });\n      res.end(\n        JSON.stringify({\n          success: false,\n          error: "ID de usuario inv\xe1lido",\n        })\n      );\n      return;\n    }\n\n    const usuario = usuarios.find((u) => u.id === id);\n\n    if (usuario) {\n      res.writeHead(200, { "Content-Type": "application/json" });\n      res.end(\n        JSON.stringify({\n          success: true,\n          data: usuario,\n        })\n      );\n    } else {\n      res.writeHead(404, { "Content-Type": "application/json" });\n      res.end(\n        JSON.stringify({\n          success: false,\n          error: "Usuario no encontrado",\n        })\n      );\n    }\n  }\n\n  async obtenerProductos(res, url) {\n    const params = url.searchParams;\n    const categoria = params.get("categoria");\n\n    let productosFiltrados = productos;\n    if (categoria) {\n      productosFiltrados = productos.filter((p) => p.categoria === categoria);\n    }\n\n    res.writeHead(200, { "Content-Type": "application/json" });\n    res.end(\n      JSON.stringify({\n        success: true,\n        data: productosFiltrados,\n        total: productosFiltrados.length,\n        filtros: {\n          categoria: categoria || "todas",\n        },\n      })\n    );\n  }\n\n  async obtenerEstadisticas(res) {\n    const stats = {\n      peticionesTotales: this.contadorPeticiones,\n      usuariosRegistrados: usuarios.length,\n      productosDisponibles: productos.length,\n      tiempoServidor: new Date().toISOString(),\n      memoria: process.memoryUsage(),\n    };\n\n    res.writeHead(200, { "Content-Type": "application/json" });\n    res.end(\n      JSON.stringify({\n        success: true,\n        data: stats,\n      })\n    );\n  }\n\n  async servirArchivoEstatico(res, rutaSolicitada) {\n    // Si la ruta es un directorio, servir index.html\n    const ruta = rutaSolicitada.endsWith("/")\n      ? rutaSolicitada + "index.html"\n      : rutaSolicitada;\n    const rutaArchivo = path.join(__dirname, "public", ruta);\n    const extension = path.extname(rutaArchivo).toLowerCase();\n    const tipoContenido = tiposMIME[extension] || "text/plain";\n\n    try {\n      const contenido = await fs.readFile(rutaArchivo);\n      res.writeHead(200, { "Content-Type": tipoContenido });\n      res.end(contenido);\n    } catch (error) {\n      if (error.code === "ENOENT") {\n        throw {\n          code: 404,\n          message: `Archivo no encontrado: ${rutaSolicitada}`,\n        };\n      } else {\n        throw { code: 500, message: `Error al leer archivo: ${error.message}` };\n      }\n    }\n  }\n\n  async leerPlantilla(nombreArchivo) {\n    const ruta = path.join(__dirname, "public", nombreArchivo);\n    return await fs.readFile(ruta, "utf8");\n  }\n\n  async manejarError(res, error, ruta) {\n    console.error("Error en el servidor:", error);\n\n    const codigo = error.code || 500;\n    const mensaje = error.message || "Error interno del servidor";\n\n    if (ruta.startsWith("/api/")) {\n      // Error en API - responder con JSON\n      res.writeHead(codigo, { "Content-Type": "application/json" });\n      res.end(\n        JSON.stringify({\n          success: false,\n          error: mensaje,\n          code: codigo,\n        })\n      );\n    } else {\n      // Error en p\xe1gina web - responder con HTML\n      const contenido = await this.leerPlantilla("index.html");\n      const html = contenido\n        .replace("{{titulo}}", `Error ${codigo} - Servidor Completo`)\n        .replace(\n          "{{contenido}}",\n          `\n                    <section class="error">\n                        <h1>Error ${codigo}</h1>\n                        <p>${mensaje}</p>\n                        <a href="/">Volver a la p\xe1gina principal</a>\n                    </section>\n                `\n        );\n\n      res.writeHead(codigo, { "Content-Type": "text/html" });\n      res.end(html);\n    }\n  }\n\n  iniciar(puerto = 3000) {\n    this.server.listen(puerto, () => {\n      console.log("=".repeat(60));\n      console.log("\ud83d\ude80 SERVEDOR WEB COMPLETO INICIADO");\n      console.log("=".repeat(60));\n      console.log(`\ud83d\udce1 URL: http://localhost:${puerto}`);\n      console.log("\ud83d\udcc1 Archivos est\xe1ticos: ./public/");\n      console.log("");\n      console.log("\ud83d\udccd RUTAS DISPONIBLES:");\n      console.log("");\n      console.log("\ud83c\udf10 P\xc1GINAS WEB:");\n      console.log("   GET /              - P\xe1gina principal");\n      console.log("   GET /acerca        - Acerca del servidor");\n      console.log("   GET /contacto      - Formulario de contacto");\n      console.log("");\n      console.log("\ud83d\udd17 API ENDPOINTS:");\n      console.log("   GET /api/usuarios           - Lista todos los usuarios");\n      console.log("   GET /api/usuarios?activos=true - Usuarios activos");\n      console.log("   GET /api/usuarios/{id}      - Usuario espec\xedfico");\n      console.log("   GET /api/productos          - Lista todos los productos");\n      console.log(\n        "   GET /api/productos?categoria=tecnologia - Productos filtrados"\n      );\n      console.log("   GET /api/estadisticas       - Estad\xedsticas del servidor");\n      console.log("");\n      console.log("\ud83d\udcc4 ARCHIVOS EST\xc1TICOS:");\n      console.log("   GET /estilo.css    - Hoja de estilos");\n      console.log("   GET /script.js     - JavaScript del cliente");\n      console.log("   GET /api.json      - Ejemplo de JSON est\xe1tico");\n      console.log("=".repeat(60));\n    });\n  }\n}\n\n// Crear e iniciar el servidor\nconst servidor = new ServidorWebCompleto();\nservidor.iniciar(3000);\n'})}),"\n",(0,i.jsx)(e.h3,{id:"estructura-final-del-proyecto",children:"Estructura Final del Proyecto"}),"\n",(0,i.jsx)(e.p,{children:"Crea los siguientes archivos para completar el ejercicio:"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"public/index.html"})," (plantilla base)"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-html",children:'<!DOCTYPE html>\n<html lang="es">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>{{titulo}}</title>\n    <link rel="stylesheet" href="/estilo-completo.css" />\n  </head>\n  <body>\n    <div class="container">\n      <header>\n        <h1>Servidor Web Completo</h1>\n        <p>Node.js + ES Modules + M\xf3dulos Nativos</p>\n      </header>\n\n      <nav>\n        <a href="/">Inicio</a>\n        <a href="/acerca">Acerca</a>\n        <a href="/contacto">Contacto</a>\n        <a href="/api/usuarios">API Usuarios</a>\n        <a href="/api/productos">API Productos</a>\n        <a href="/api/estadisticas">Estad\xedsticas</a>\n      </nav>\n\n      <main>{{contenido}}</main>\n\n      <footer>\n        <p>Servidor educativo - Node.js con ES Modules</p>\n        <p>Peticiones atendidas: <span id="contador-peticiones">0</span></p>\n      </footer>\n    </div>\n\n    <script src="/script-completo.js"><\/script>\n  </body>\n</html>\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"public/estilo-completo.css"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-css",children:'* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;\n  line-height: 1.6;\n  color: #2c3e50;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  min-height: 100vh;\n}\n\n.container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\nheader {\n  background: rgba(255, 255, 255, 0.95);\n  padding: 40px;\n  border-radius: 15px;\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);\n  text-align: center;\n  margin-bottom: 30px;\n  backdrop-filter: blur(10px);\n}\n\nh1 {\n  color: #2c3e50;\n  margin-bottom: 10px;\n  font-size: 2.8em;\n  background: linear-gradient(135deg, #667eea, #764ba2);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n}\n\nheader p {\n  color: #7f8c8d;\n  font-size: 1.2em;\n}\n\nnav {\n  display: flex;\n  justify-content: center;\n  flex-wrap: wrap;\n  gap: 10px;\n  margin: 30px 0;\n}\n\nnav a {\n  text-decoration: none;\n  color: #3498db;\n  padding: 12px 20px;\n  border: 2px solid #3498db;\n  border-radius: 25px;\n  transition: all 0.3s ease;\n  font-weight: 500;\n  background: white;\n}\n\nnav a:hover {\n  background: #3498db;\n  color: white;\n  transform: translateY(-2px);\n  box-shadow: 0 5px 15px rgba(52, 152, 219, 0.3);\n}\n\nmain {\n  background: rgba(255, 255, 255, 0.95);\n  padding: 40px;\n  border-radius: 15px;\n  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);\n  margin-bottom: 20px;\n  backdrop-filter: blur(10px);\n}\n\nsection {\n  margin-bottom: 30px;\n}\n\nsection h2 {\n  color: #2c3e50;\n  margin-bottom: 20px;\n  padding-bottom: 10px;\n  border-bottom: 2px solid #ecf0f1;\n}\n\nsection h3 {\n  color: #34495e;\n  margin: 20px 0 15px 0;\n}\n\nul {\n  list-style: none;\n}\n\nli {\n  padding: 10px 0;\n  border-bottom: 1px solid #ecf0f1;\n  position: relative;\n  padding-left: 25px;\n}\n\nli:before {\n  content: "\u25b6";\n  color: #3498db;\n  position: absolute;\n  left: 0;\n  font-size: 0.8em;\n}\n\nstrong {\n  color: #2c3e50;\n}\n\n.endpoints {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n  gap: 20px;\n  margin-top: 20px;\n}\n\n.endpoint {\n  background: #f8f9fa;\n  padding: 20px;\n  border-radius: 10px;\n  border-left: 4px solid #3498db;\n}\n\n.endpoint code {\n  background: #2c3e50;\n  color: white;\n  padding: 8px 12px;\n  border-radius: 5px;\n  font-family: "Courier New", monospace;\n  display: block;\n  margin-bottom: 10px;\n}\n\nform {\n  background: #f8f9fa;\n  padding: 30px;\n  border-radius: 10px;\n}\n\nlabel {\n  display: block;\n  margin-bottom: 8px;\n  font-weight: 500;\n  color: #2c3e50;\n}\n\ninput,\ntextarea {\n  width: 100%;\n  padding: 12px;\n  border: 2px solid #ddd;\n  border-radius: 8px;\n  font-size: 16px;\n  transition: border-color 0.3s ease;\n}\n\ninput:focus,\ntextarea:focus {\n  outline: none;\n  border-color: #3498db;\n}\n\nbutton {\n  background: linear-gradient(135deg, #3498db, #2980b9);\n  color: white;\n  padding: 12px 30px;\n  border: none;\n  border-radius: 8px;\n  font-size: 16px;\n  cursor: pointer;\n  transition: transform 0.3s ease;\n}\n\nbutton:hover {\n  transform: translateY(-2px);\n}\n\nfooter {\n  text-align: center;\n  color: white;\n  margin-top: 40px;\n  padding: 20px;\n}\n\nfooter p {\n  margin: 5px 0;\n}\n\n.error {\n  text-align: center;\n  padding: 40px;\n}\n\n.error h1 {\n  font-size: 4em;\n  margin-bottom: 20px;\n  color: #e74c3c;\n}\n\n@media (max-width: 768px) {\n  .container {\n    padding: 10px;\n  }\n\n  header {\n    padding: 20px;\n  }\n\n  h1 {\n    font-size: 2em;\n  }\n\n  nav {\n    flex-direction: column;\n    align-items: center;\n  }\n\n  nav a {\n    width: 200px;\n    text-align: center;\n  }\n\n  main {\n    padding: 20px;\n  }\n\n  .endpoints {\n    grid-template-columns: 1fr;\n  }\n}\n'})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"public/script-completo.js"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// JavaScript completo para el servidor web\ndocument.addEventListener("DOMContentLoaded", function () {\n  console.log("Servidor Web Completo - Cliente inicializado");\n\n  // Actualizar contador de peticiones en el footer\n  const contadorElemento = document.getElementById("contador-peticiones");\n  if (contadorElemento) {\n    // Simular actualizaci\xf3n del contador (en un caso real, esto vendr\xeda del servidor)\n    let contador = 0;\n    setInterval(() => {\n      contador++;\n      contadorElemento.textContent = contador;\n    }, 2000);\n  }\n\n  // Mejorar la interactividad de los enlaces de navegaci\xf3n\n  const enlaces = document.querySelectorAll("nav a");\n  enlaces.forEach((enlace) => {\n    // A\xf1adir efecto de carga\n    enlace.addEventListener("click", function (e) {\n      if (this.getAttribute("href").startsWith("/api/")) {\n        return; // No aplicar efecto a enlaces de API\n      }\n\n      e.preventDefault();\n      const url = this.getAttribute("href");\n\n      // A\xf1adir clase de carga\n      this.classList.add("cargando");\n      this.innerHTML = "\u23f3 Cargando...";\n\n      // Navegar despu\xe9s de un breve delay para mostrar el efecto\n      setTimeout(() => {\n        window.location.href = url;\n      }, 500);\n    });\n\n    // Efectos hover mejorados\n    enlace.addEventListener("mouseenter", function () {\n      if (!this.classList.contains("cargando")) {\n        this.style.transform = "translateY(-3px) scale(1.05)";\n        this.style.boxShadow = "0 8px 20px rgba(52, 152, 219, 0.3)";\n      }\n    });\n\n    enlace.addEventListener("mouseleave", function () {\n      if (!this.classList.contains("cargando")) {\n        this.style.transform = "translateY(0) scale(1)";\n        this.style.boxShadow = "none";\n      }\n    });\n  });\n\n  // Mejorar los formularios\n  const formularios = document.querySelectorAll("form");\n  formularios.forEach((form) => {\n    form.addEventListener("submit", function (e) {\n      const boton = this.querySelector(\'button[type="submit"]\');\n      const textoOriginal = boton.textContent;\n\n      // Efecto de carga en el bot\xf3n\n      boton.innerHTML = "\u23f3 Enviando...";\n      boton.disabled = true;\n\n      // En un caso real, aqu\xed har\xedamos una petici\xf3n fetch\n      setTimeout(() => {\n        alert("Formulario enviado (esto es una simulaci\xf3n)");\n        boton.innerHTML = textoOriginal;\n        boton.disabled = false;\n      }, 1500);\n\n      e.preventDefault();\n    });\n  });\n\n  // A\xf1adir funcionalidad a las secciones\n  const secciones = document.querySelectorAll("section");\n  secciones.forEach((seccion, index) => {\n    // A\xf1adir animaci\xf3n de entrada\n    seccion.style.opacity = "0";\n    seccion.style.transform = "translateY(20px)";\n\n    setTimeout(() => {\n      seccion.style.transition = "all 0.6s ease";\n      seccion.style.opacity = "1";\n      seccion.style.transform = "translateY(0)";\n    }, index * 200);\n\n    // Efecto hover en secciones\n    seccion.addEventListener("mouseenter", function () {\n      this.style.transform = "translateY(-5px)";\n      this.style.boxShadow = "0 10px 30px rgba(0,0,0,0.15)";\n    });\n\n    seccion.addEventListener("mouseleave", function () {\n      this.style.transform = "translateY(0)";\n      this.style.boxShadow = "0 5px 15px rgba(0,0,0,0.1)";\n    });\n  });\n\n  // A\xf1adir estilos para el estado de carga\n  const style = document.createElement("style");\n  style.textContent = `\n        .cargando {\n            background: #95a5a6 !important;\n            border-color: #95a5a6 !important;\n            cursor: not-allowed;\n        }\n        \n        section {\n            transition: all 0.3s ease;\n        }\n    `;\n  document.head.appendChild(style);\n\n  // Mostrar informaci\xf3n de la p\xe1gina actual en consola\n  console.log("P\xe1gina actual:", window.location.pathname);\n  console.log("User Agent:", navigator.userAgent);\n});\n'})}),"\n",(0,i.jsx)(e.h2,{id:"ejecuci\xf3n-y-pruebas-finales",children:"Ejecuci\xf3n y Pruebas Finales"}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Ejecuta el servidor completo:"})}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"node servidor-completo.js\n"})}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Prueba todas las funcionalidades:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/"})," - P\xe1gina principal con navegaci\xf3n completa"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/acerca"}),' - P\xe1gina "Acerca de"']}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/contacto"})," - Formulario de contacto"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api/usuarios"})," - API de usuarios"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api/usuarios?activos=true"})," - Usuarios filtrados"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api/usuarios/1"})," - Usuario espec\xedfico"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api/productos"})," - API de productos"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api/productos?categoria=tecnologia"})," - Productos filtrados"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/api/estadisticas"})," - Estad\xedsticas del servidor"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.code,{children:"http://localhost:3000/ruta-inexistente"})," - P\xe1gina de error 404"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"qu\xe9-has-aprendido",children:"\xbfQu\xe9 Has Aprendido?"}),"\n",(0,i.jsx)(e.p,{children:"Al completar este m\xf3dulo, ahora comprendes:"}),"\n",(0,i.jsx)(e.h3,{id:"conceptos-fundamentales",children:"Conceptos Fundamentales"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"C\xf3mo Node.js maneja peticiones HTTP"})," a trav\xe9s del m\xf3dulo nativo ",(0,i.jsx)(e.code,{children:"http"})]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"El ciclo de vida de una petici\xf3n web"})," desde que llega al servidor hasta que se env\xeda la respuesta"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Diferencia entre ES Modules y CommonJS"})," y c\xf3mo configurar proyectos con ES Modules"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"habilidades-t\xe9cnicas",children:"Habilidades T\xe9cnicas"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Crear servidores HTTP b\xe1sicos"})," que responden a peticiones"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Implementar sistemas de rutas"})," para manejar diferentes URLs y m\xe9todos HTTP"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Servir archivos est\xe1ticos"})," como HTML, CSS, JavaScript e im\xe1genes"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Detectar tipos MIME autom\xe1ticamente"})," para enviar las cabeceras correctas"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Construir APIs REST b\xe1sicas"})," que devuelven datos JSON"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Manejar errores HTTP"})," con c\xf3digos de estado y p\xe1ginas personalizadas"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"buenas-pr\xe1cticas",children:"Buenas Pr\xe1cticas"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Separar el contenido HTML"})," del c\xf3digo JavaScript usando archivos externos"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Usar async/await"})," para operaciones as\xedncronas con el sistema de archivos"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Organizar el c\xf3digo en clases"})," para mejor mantenibilidad"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Manejar rutas no existentes"})," con p\xe1ginas de error 404 amigables"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Validar par\xe1metros"})," en las APIs para evitar errores"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"conocimientos-avanzados",children:"Conocimientos Avanzados"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Trabajar con par\xe1metros de consulta"})," en las URLs"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Implementar plantillas HTML b\xe1sicas"})," para contenido din\xe1mico"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Crear sistemas de archivos est\xe1ticos"})," completos y eficientes"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Manejar diferentes tipos de contenido"})," (texto, JSON, HTML, binarios)"]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"recursos-adicionales",children:"Recursos Adicionales"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://nodejs.org/api/http.html",children:"Documentaci\xf3n oficial del m\xf3dulo HTTP de Node.js"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://nodejs.org/api/esm.html",children:"Gu\xeda de ES Modules en Node.js"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status",children:"MDN Web Docs - HTTP Status Codes"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types",children:"MDN Web Docs - MIME Types"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://nodejs.org/api/fs.html",children:"Node.js File System (fs) documentation"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/async_function",children:"JavaScript async/await guide"})}),"\n"]}),"\n",(0,i.jsx)(e.p,{children:"Este conocimiento fundamental te prepara para entender c\xf3mo funcionan los frameworks web modernos y te da la base para construir aplicaciones web robustas sin dependencias externas."})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}}}]);